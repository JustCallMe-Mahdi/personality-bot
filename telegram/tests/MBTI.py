from aiogram import Bot, Dispatcher, Router, F
from db.database import get_user_profile, save_latest_test, save_user_result
from aiogram.types import InlineKeyboardMarkup, InlineKeyboardButton, CallbackQuery, FSInputFile, ReplyKeyboardMarkup,KeyboardButton
from aiogram.fsm.context import FSMContext
from aiogram.fsm.state import State, StatesGroup
import os
from datetime import datetime
import pytz
from aiogram import types

router = Router()

MBTI_start_button = InlineKeyboardMarkup(
    inline_keyboard=[
        [
            InlineKeyboardButton(text="๐ข ุณุงุฏู (16 ุณูุงู)", callback_data="mbti_simple"),
            InlineKeyboardButton(text="๐ต ูพุดุฑูุชู (32 ุณูุงู)", callback_data="mbti_advanced")
        ],
        [
            InlineKeyboardButton(text="ุชุณุช MBTI ฺูโ", callback_data="mbti_help"),
        ],
        [InlineKeyboardButton(text="ุจุงุฒฺฏุดุช ๐", callback_data="main_menu")],
    ]
)

main_menu = ReplyKeyboardMarkup(
    keyboard=[
        [KeyboardButton(text="๐ง ุชุณุช ูุง")],
        [KeyboardButton(text="๐ฌ ฺุช ูุงุดูุงุณ"), KeyboardButton(text="๐ฒ ุณุฑฺฏุฑู ู ุชุณุช ูุงู")],
        [KeyboardButton(text="๐ฅ ููู ู ูุฏุง"), KeyboardButton(text="๐ ฺฉู ูพูู")],
        [KeyboardButton(text="๐๏ธ ฺุงูุด ุฑูุฒุงูู"), KeyboardButton(text="๐ ุฑุชุจูโุจูุฏ")],
        [KeyboardButton(text="๐ ูฺฉโุจุงุช"), KeyboardButton(text="๐ ูพุดุชุจุงู")]
    ],
    resize_keyboard=True,
    input_field_placeholder="ฺฉ ฺฏุฒูู ุฑู ุงูุชุฎุงุจ ฺฉู..."
)






@router.callback_query(F.data == "MBTI_test")
async def mbti_start(callback: CallbackQuery, state: FSMContext):
    profile = get_user_profile(callback.from_user.id)
    name = profile[0] if profile else "ุฑูู"
    await callback.message.answer(f"""๐งฌ ุชุณุช ุดุฎุตุช MBTI: ุฎูุฏุชู ฺฉุดู ฺฉู!
ูุฑุงุฑู ุจุง ฺฉ ุงุฒ ูุนุฑููโุชุฑู ุชุณุชโูุง ุฑูุงูุดูุงุณ ุฏูุง ุขุดูุง ุจุด.
ุงู ุชุณุช ุจูุช ูโฺฏู ฺุทูุฑ ูฺฉุฑ ูโฺฉูุ ุชุตูู ูโฺฏุฑุ ู ุจุง ุฏูุง ุชุนุงูู ุฏุงุฑ.
ฺฉุงูู ููุท ุงูุชุฎุงุจ ฺฉู:""", reply_markup=MBTI_start_button)


@router.callback_query(F.data == "main_menu")
async def back_to_main_menu(callback: CallbackQuery, state: FSMContext):
    profile = get_user_profile(callback.from_user.id)
    name = profile[0] if profile else "ุฑูู"

    await callback.message.answer(
        f"""๐ ุจุฑฺฏุดุชู ุจู ููู ุงุตูุ {name} ุฌุงู!
ุงุฒ ููู ุฒุฑ ฺฉ ุฑู ุงูุชุฎุงุจ ฺฉู:""",
        reply_markup=main_menu
    )
    await callback.answer()




#Guide MBTI test
mbti_guide_text = """
๐ ุฑุงูููุง ุชุณุช ุดุฎุตุช MBTI

ูุง ุชู ุงู ุฑุจุงุช ุฏู ูุณุฎูโ ูุชูุงูุช ุงุฒ ุชุณุช MBTI ุฑู ุจุฑุงุช ุขูุงุฏู ฺฉุฑุฏู:

1๏ธโฃ **ูุณุฎูโ ุณุงุฏู (16 ุณูุงู)**
๐น ุณุฑุน ู ุฑุงฺฏุงูู  
๐น ูู ุฏูุชุด ูพุงูโุชุฑู (ุชูุฑุจุงู 60 ุชุง 70 ุฏุฑุตุฏ ูุงุจู ุงุนุชูุงุฏู)  
๐น ุณูุงูโูุงุด ุจู ุณุจฺฉ ยซุขุฑู ุง ููยป ุทุฑุงุญ ุดุฏู ุชุง ุจุง ฺฉูุชุฑู ุฏุฑฺฏุฑ ุฐููุ ุณุฑุน ุฌูุงุจ ุจุฏ  
๐น ููุงุณุจ ุจุฑุง ููุช ฺฉู ููุช ฺฉู ุฏุงุฑ ุง ูโุฎูุง ุฎู ุณุฑุน ู ุฏุฏ ฺฉู ุจฺฏุฑ

2๏ธโฃ **ูุณุฎูโ ูพุดุฑูุชู (32 ุณูุงู ุฏูู ู ุชุญูู)**
๐ธ ุฏูุช ุจุงูุง (ุญุฏูุฏ 90ูช ุจู ุจุงูุง)  
๐ธ ุณูุงูโูุงุด ุนููโุชุฑู ู ููุฑุงู ุจุง ุชูุถุญุงุช ุฑู ูุฑ ฺฏุฒูู ุทุฑุงุญ ุดุฏู  
๐ธ ุงู ูุณุฎู ูพููู ฺูู ุฒูุงูุ ุงูุฑฺ ู ุชุญูู ุฒุงุฏ ุจุฑุง ุทุฑุงุญโุด ุตุฑู ุดุฏู  
๐ธ ููุงุณุจ ฺฉุณุงู ฺฉู ูุงูุนุงู ูโุฎูุงู ุฎูุฏุดููู ุจูุชุฑ ุจุดูุงุณู ุง ุฏูุจุงู ุชุตููโฺฏุฑโูุง ุฏููโุชุฑ ุชู ุฒูุฏฺฏุ ฺฉุงุฑุ ุงุฑุชุจุงุทุงุช ู ุฑุดุฏ ุดุฎุต ูุณุชู

๐ฐ **ูุฒููโ ูุณุฎู ูพุดุฑูุชู:** 39,000 ุชููุงู  

๐ ูพุณ ุงุฒ ุฎุฑุฏุ ุฏุณุชุฑุณ ุฏุงุฆู ุจู ุชุณุช ูพุดุฑูุชู ุจุฑุง ุดูุง ุจุงุฒ ูุดู ู ูโุชูู ูุฑฺูุฏุฑ ุฎูุงุณุช ุงุฒุด ุงุณุชูุงุฏู ฺฉู ุง ูุชุงุฌุช ุฑู ุฏูุจุงุฑู ุจุฑุฑุณ ฺฉู.

---

๐ ุชุณุช MBTI ฺู ู ฺุฑุง ููููุ

ุชุณุช MBTI ฺฉ ุงุฒ ูุนุชุจุฑุชุฑู ุงุจุฒุงุฑูุง ุดูุงุฎุช ุดุฎุตุช ุฏุฑ ุฏูุง ุงุณุช. ุงู ุชุณุช ฺฉูฺฉ ูโฺฉูู ุจููู:

โข ฺุทูุฑ ูฺฉุฑ ูโฺฉู ู ุชุตูู ูโฺฏุฑ  
โข ุชู ุฌูุนโ ฺุทูุฑ ุฑูุชุงุฑ ูโฺฉู  
โข ฺู ฺฉุงุฑ ุจูุช ูโุณุงุฒู ู ฺฉุฌุง ุงูุฑฺโุชู ุงุฒ ุฏุณุช ูโุฏ  
โข ฺุทูุฑ ุจูุชุฑ ุงุฏ ูโฺฏุฑ ู ฺุทูุฑ ุจูุชุฑ ุงุฑุชุจุงุท ูโฺฏุฑ

ูุง ุงู ุชุณุช ุฑู ุงูุฌุง ุขูุฑุฏู ุชุง ฺฉูฺฉุช ฺฉูู ุฎูุฏุช ุฑู ุจูุชุฑ ุจุดูุงุณ ู ุขฺฏุงูุงููโุชุฑ ูุณุฑ ุฑุดุฏุช ุฑู ุจุณุงุฒ. ๐ฏ

---

โ ูพุดููุงุฏ ูโฺฉูู:
ุงูู ุชุณุช ุณุงุฏู ุฑู ุจุฒู ุชุง ุขุดูุง ุจุด.
ุจุนุฏ ุงฺฏุฑ ุญุณ ฺฉุฑุฏ ูุชุฌูโุงุด ูุจููู ุง ุฏูุณุช ุฏุงุฑ ุฏููโุชุฑ ุจุดุ ูุณุฎู ูพุดุฑูุชู ุฑู ุงูุชุญุงู ฺฉู.

ูุฑ ุณูุงู ุฏุงุดุชุ ูพุดุชุจุงู ููุดู ุจุงูุงุชู. ๐
"""

guide_back_button = InlineKeyboardMarkup(
    inline_keyboard=[
        [InlineKeyboardButton(text="๐ ุจุงุฒฺฏุดุช", callback_data="main_menu")]
    ]
)

@router.callback_query(F.data == "mbti_help")
async def show_mbti_help(callback: CallbackQuery):
    await callback.message.edit_text(
        text=mbti_guide_text,
        reply_markup=guide_back_button
    )
    await callback.answer()



#ุชุณุช ูพุดุฑูุชู MBTI
@router.callback_query(F.data == "mbti_advanced")
async def advanced_test_intro(callback: CallbackQuery):
    text = """
โจ ุชุณุช ุดุฎุตุช ูพุดุฑูุชู MBTI โจ

ุงู ุชุณุชุ ูุฑฺู ุญุฑููโุง ู ุฏูู ูุงุณุช ฺฉู ุจุง ณฒ ุณูุงู ุนูู ู ุชุญููุ ูฺฺฏโูุง ูุงูุน ู ูพููุงู ุดุฎุตุชุช ุฑู ุขุดฺฉุงุฑ ูโฺฉูู.

๐ ุงู ุชุณุช ุจูโุฏูู ุทุฑุงุญ ูพฺุฏู ู ุชุญููโูุง ุฏููุ ูุฒููโุง ุฌุฒุฆ ุฏุงุฑูุ ูู ูุทูุฆู ุจุงุด ุงุฑุฒุดุด ุฑู ุฏุงุฑู!

๐ฐ ูุฒูู: 39,000 ุชููุงู  
ุงู ุณุฑูุงูโฺฏุฐุงุฑ ุจุฑุง ุฎูุฏุดูุงุณ ุฏููโุชุฑ ู ููููุช ุจุดุชุฑู.

๐ ุขูุงุฏูโุง ูุงุฑุฏ ุงู ุชุฌุฑุจู ูุชูุงูุช ุจุด ู ุฎูุฏุช ุฑู ุจูุชุฑ ุงุฒ ููุดู ุจุดูุงุณุ

ุฏฺฉูู ุฒุฑ ุฑู ุจุฒู ู ุจุฒู ุจุฑู! ๐
"""

    keyboard = InlineKeyboardMarkup(inline_keyboard=[
        [InlineKeyboardButton(text="โ ุจููุ ุงุฏุงูู ูโุฏู", callback_data="mbti_advanced_start")],
        [InlineKeyboardButton(text="๐ ุจุงุฒฺฏุดุช ุจู ููู ุงุตู", callback_data="main_menu")]
    ])

    await callback.message.edit_text(text, reply_markup=keyboard)
    await callback.answer()



mbti_advanced_questions = [
    {
        "text": """1๏ธโฃ ููุช ุงูุฑฺ ุฏุงุฑูุ ุจุดุชุฑ ุฏูู ูโุฎูุงุฏ ุจุง ุจูู ููุช ุจฺฏุฐุฑููู ุชุง ุงูฺฉู ุชููุง ุจุงุดู.  
โ ุขุฑู ุนู ุฌูุนโฺฏุฑุง ู ุงุฌุชูุงุน ูุณุชุ  
โ ูู ุนู ุชุฑุฌุญ ูโุฏ ุชููุง ุจุงุด ู ุฎูุฏุชู ุจุงุฒุงุจ ฺฉูุ  
โ ููโุฏููู ุนู ุจุณุชฺฏ ุจู ุญุงูุช ุฏุงุฑู.""",
        "dimension": "EI",
        "direction": "E"
    },
    {
        "text": """2๏ธโฃ ุจู ุฌุง ุชฺฉู ุจุฑ ุญุณุ ุจุดุชุฑ ุฏูุจุงู ุฏุงุฏูโูุง ู ุฌุฒุฆุงุช ูุงูุน ูุณุชู.  
โ ุขุฑู ุนู ูุงูุนโฺฏุฑุง ู ุฌุฒุฆโูฺฏุฑุ  
โ ูู ุนู ุจุดุชุฑ ุจุง ุญุณ ุฏุฑูู ู ุดููุฏ ูพุด ูโุฑุ  
โ ููโุฏููู ุนู ฺฏุงู ุจุง ูุงูุนุช ูพุด ูุฑ ฺฏุงู ุจุง ุญุณ.""",
        "dimension": "SN",
        "direction": "S"
    },
    {
        "text": """3๏ธโฃ ูุนูููุงู ุชุตููโูุงู ุจุฑ ุงุณุงุณ ููุทู ู ุชุญูู ูุณุชุ ูู ุงุญุณุงุณ.  
โ ุขุฑู ุนู ุชุตููุงุชุช ููุทู ู ุชุญููโุงูุ  
โ ูู ุนู ุจุดุชุฑ ุฏู ู ุงุญุณุงุณ ุชุตูู ูโฺฏุฑุ  
โ ููโุฏููู ุนู ุชุฑฺฉุจ ุงุฒ ูุฑ ุฏู ุณุจฺฉ.""",
        "dimension": "TF",
        "direction": "T"
    },
    {
        "text": """4๏ธโฃ ุชุฑุฌุญ ูโุฏู ุงุฒ ูุจู ุจุฑุง ฺฉุงุฑูุงู ุจุฑูุงูู ุฏุงุดุชู ุจุงุดูุ ูู ุงูฺฉู ูโุงูุจุฏุงูู ุนูู ฺฉูู.  
โ ุขุฑู ุนู ุจุฑูุงููโุฑุฒ ุจุฑุงุช ููููุ  
โ ูู ุนู ุจุง ุฌุฑุงู ูพุด ูุฑ ู ููุนุทูุ  
โ ููโุฏููู ุนู ุจุนุถ ููุชุง ุจุฑูุงููโุฑุฒ ูโฺฉู ุจุนุถ ููุชุง ูู.""",
        "dimension": "JP",
        "direction": "J"
    },
    {
        "text": """5๏ธโฃ ุจูุฏู ุจุง ุฏฺฏุฑุงู ุจูู ุงูุฑฺ ูโุฏูุ ูู ุงูฺฉู ุฎุณุชูโู ฺฉูู.  
โ ุขุฑู ุนู ุฌูุน ุจูุช ุงูุฑฺ ูโุฏูุ  
โ ูู ุนู ุจุนุฏ ุงุฒ ุฌูุน ุจูุฏู ุฎุณุชู ูโุดุ  
โ ููโุฏููู ุนู ุจุณุชฺฏ ุฏุงุฑู ุจู ุฌูุน ู ุดุฑุงุท.""",
        "dimension": "EI",
        "direction": "E"
    },
#     {
#         "text": """6๏ธโฃ ุจุดุชุฑ ููุชุง ูุงูุนุชโูุง ููููุณ ุฑู ุชุฑุฌุญ ูโุฏู ุชุง ุงุฏูโูุง ูุฑุถ.
# โ ุขุฑู ุนู ุงูู ุชุฌุฑุจูโูุง ูุงูุน ูุณุชุ
# โ ูู ุนู ุจู ุงุฏูโูุง ู ููุงูู ุฐูู ุนูุงููโููุฏุชุฑุ
# โ ููโุฏููู ุนู ฺฏุงู ูุงูุนโฺฏุฑุง ฺฏุงู ุฎุงูโูพุฑุฏุงุฒ.""",
#         "dimension": "SN",
#         "direction": "S"
#     },
#     {
#         "text": """7๏ธโฃ ุณุน ูโฺฉูู ููุดู ููุตู ู ููุทู ุจุงุดูุ ุญุช ุงฺฏู ฺฉุณ ูุงุฑุงุญุช ุจุดู.
# โ ุขุฑู ุนู ููุทู ุจุฑุงุช ูููโุชุฑ ุงุฒ ุงุญุณุงุณุงุชูุ
# โ ูู ุนู ุชุฑุฌุญ ูโุฏ ุฏู ฺฉุณ ูุดฺฉูู ุญุช ุงฺฏู ููุทู ุฒุฑ ุณูุงู ุจุฑูุ
# โ ููโุฏููู ุนู ุจุณุชู ุจู ูููุนุช ุฑูุชุงุฑ ูโฺฉู.""",
#         "dimension": "TF",
#         "direction": "T"
#     },
#     {
#         "text": """8๏ธโฃ ุฏูุณุช ุฏุงุฑู ุจุฏููู ูุฑุงุฑู ฺ ูพุด ุจุงุฏ ู ููู ฺุฒ ุชุญุช ฺฉูุชุฑู ุจุงุดู.
# โ ุขุฑู ุนู ุฏูุจุงู ูพุดโุจูโูพุฐุฑ ู ูุธู ูุณุชุ
# โ ูู ุนู ุงูู ุงูุนุทุงู ู ุชุบุฑ ูุญุธูโุง ูุณุชุ
# โ ููโุฏููู ุนู ุจู ูููุนุช ุจุณุชฺฏ ุฏุงุฑู.""",
#         "dimension": "JP",
#         "direction": "J"
#     },
#     {
#         "text": """9๏ธโฃ ุจูุฏู ุชู ุฌูุน ุจุงุนุซ ูโุดู ุดุงุฏ ู ุณุฑุฒูุฏูโุชุฑ ุจุงุดู.
# โ ุขุฑู ุนู ุจุฑููโฺฏุฑุง ู ุฌูุนโูุญูุฑ ูุณุชุ
# โ ูู ุนู ุชุฑุฌุญ ูโุฏ ุชููุง ุจุงุด ู ุงุฒ ุฏุฑูู ุงูุฑฺ ุจฺฏุฑุ
# โ ููโุฏููู ุนู ูู ุฌูุนโุฏูุณุช ูู ุฎููุชโุทูุจ.""",
#         "dimension": "EI",
#         "direction": "E"
#     },
#     {
#         "text": """๐ ุจุดุชุฑ ุจู ฺุฒุง ฺฉู ูุงุจู ูุดุงูุฏู ู ูุงุจู ุณูุฌุด ูุณุชู ุงุนุชูุงุฏ ุฏุงุฑู.
# โ ุขุฑู ุนู ูุงูุนโฺฏุฑุง ู ุนูู ูฺฉุฑ ูโฺฉูุ
# โ ูู ุนู ุญุณ ู ุดููุฏ ุฏุฑููุช ุฑุงูููุง ุงุตูุชูุ
# โ ููโุฏููู ุนู ฺฏุงู ฺฉ ฺฏุงู ุงูู ฺฉ.""",
#         "dimension": "SN",
#         "direction": "S"
#     },
#     {
#         "text": """1๏ธโฃ1๏ธโฃ ุชุฑุฌุญ ูโุฏู ุญุฑู ุญู ุฑู ุจุฒูู ุญุช ุงฺฏู ูุงุฑุงุญุชโฺฉููุฏู ุจุงุดู.
# โ ุขุฑู ุนู ุตุฏุงูุช ู ููุทู ุจุฑุงุช ูููโุชุฑ ุงุฒ ุงุญุณุงุณุงุชูุ
# โ ูู ุนู ุจุดุชุฑ ุฑุนุงุช ุงุญุณุงุณุงุช ุฏฺฏุฑุงู ุฑู ูโฺฉูุ
# โ ููโุฏููู ุนู ุจุณุชฺฏ ุจู ุทุฑู ููุงุจู ุฏุงุฑู.""",
#         "dimension": "TF",
#         "direction": "T"
#     },
#     {
#         "text": """2๏ธโฃ1๏ธโฃ ููุช ูพุฑูฺูโุง ุฏุงุฑูุ ูููโฺุฒ ุฑู ุฏูู ุฒูุงูโุจูุฏ ูโฺฉูู.
# โ ุขุฑู ุนู ูุธู ู ูุฏุฑุช ุฒูุงู ุจุฑุงุช ููููุ
# โ ูู ุนู ุจุดุชุฑ ุจุง ุญุงู ูุญุธู ุฌูู ูุฑุ
# โ ููโุฏููู ุนู ุจุนุถ ููุชุง ุฏูู ุจุฑูุงููโุฑุฒ ูโฺฉู ุจุนุถ ููุชุง ูู.""",
#         "dimension": "JP",
#         "direction": "J"
#     },
#     {
#         "text": """3๏ธโฃ1๏ธโฃ ุจุนุฏ ุงุฒ ู ุฑูุฒ ุทููุงูุ ุจูุฏู ฺฉูุงุฑ ุขุฏูโูุง ุฎุณุชฺฏโูู ุฏุฑ ูุงุฑู.
# โ ุขุฑู ุนู ุชุนุงูู ุงุฌุชูุงุน ุจุฑุงุช ุงูุฑฺโุจุฎุดูุ
# โ ูู ุนู ุชุนุงูู ุฒุงุฏ ุฎุณุชูโุช ูโฺฉููุ
# โ ููโุฏููู ุนู ุจุณุชฺฏ ุฏุงุฑู ุจู ุดุฑุงุท ู ููุน ุฌูุน.""",
#         "dimension": "EI",
#         "direction": "E"
#     },
#     {
#         "text": """4๏ธโฃ1๏ธโฃ ุจู ุฌุง ุงูฺฉู ุชุฆูุฑ ุจุจุงููุ ุณุน ูโฺฉูู ุชู ุนูู ูููโฺุฒู ุจูููู.
# โ ุขุฑู ุนู ุนููโฺฏุฑุง ู ูุงูุนโูฺฏุฑุ
# โ ูู ุนู ุงูู ุงุฒ ููู ุฏูุจุงู ุฏุฑฺฉ ููุงูู ู ุชุฆูุฑโูุง ูุณุชุ
# โ ููโุฏููู ุนู ุจุณุชู ุจู ููุถูุน ุฑูุชุงุฑุช ูุฑู ุฏุงุฑู.""",
#         "dimension": "SN",
#         "direction": "S"
#     },
#     {
#         "text": """5๏ธโฃ1๏ธโฃ ุชุตููโฺฏุฑ ุจุงุฏ ุจุฑ ุงุณุงุณ ููุทู ุจุงุดูุ ูู ุงุญุณุงุณุงุช ุดุฎุต.
# โ ุขุฑู ุนู ููุทู ุจุฑุงุช ุงุตู ุชุตููโฺฏุฑูุ
# โ ูู ุนู ุงุญุณุงุณุงุช ู ุฑูุงุจุท ุฑู ุชู ุชุตููุงุช ุฏุฑ ูุธุฑ ูโฺฏุฑุ
# โ ููโุฏููู ุนู ุจุณุชฺฏ ุจู ุดุฑุงุท ุฏุงุฑู.""",
#         "dimension": "TF",
#         "direction": "T"
#     },
#     {
#         "text": """6๏ธโฃ1๏ธโฃ ุจุฑูุงููโุฑุฒ ุจุฑุงู ูููู ฺูู ุญุณ ุงููุช ู ูุธู ูโุฏู.
# โ ุขุฑู ุนู ุจุง ุจุฑูุงูู ุฒูุฏฺฏ ูโฺฉูุ
# โ ูู ุนู ุฏูุณุช ุฏุงุฑ ุจุง ุฌุฑุงู ูพุด ุจุฑุ
# โ ููโุฏููู ุนู ฺฏุงู ุจุฑูุงููโุฏุงุฑุ ฺฏุงู ุฑูุง.""",
#         "dimension": "JP",
#         "direction": "J"
#     },
#     {
#         "text": """7๏ธโฃ1๏ธโฃ ููุช ุชููุง ูโูููู ุฒุงุฏ ุงูุฑฺ ููโฺฏุฑูุ ุจุดุชุฑ ุชู ุฌูุน ุดุงุฑฺ ูโุดู.
# โ ุขุฑู ุนู ุจูุฏู ุจุง ุฏฺฏุฑุงู ุดุงุฑฺุช ูโฺฉููุ
# โ ูู ุนู ุจุง ุชููุง ุงูุฑฺ ูโฺฏุฑุ
# โ ููโุฏููู ุนู ุจู ููุน ุฌูุน ุง ุญุงู ุฏูุช ุจุณุชฺฏ ุฏุงุฑู.""",
#         "dimension": "EI",
#         "direction": "E"
#     },
#     {
#         "text": """8๏ธโฃ1๏ธโฃ ุฏูุจุงู ฺุฒุง ูุณุชู ฺฉู ุซุงุจุช ุดุฏู ู ูุจูุงู ุชุฌุฑุจูโุดูู ุดุฏู.
# โ ุขุฑู ุนู ุจู ุชุฌุฑุจูโูุง ฺฏุฐุดุชู ุงุนุชูุงุฏ ุฏุงุฑุ
# โ ูู ุนู ุฏูุจุงู ุฑุงูโูุง ุฌุฏุฏ ู ุฎูุงูุงููโุงุ
# โ ููโุฏููู ุนู ุจุณุชู ุจู ุดุฑุงุท ุชุตูู ูโฺฏุฑ.""",
#         "dimension": "SN",
#         "direction": "S"
#     },
#     {
#         "text": """9๏ธโฃ1๏ธโฃ ุงฺฏู ฺฉุณ ุฎุทุง ฺฉููุ ุงูู ุจู ุฏูุงู ููุทูโุด ูฺฏุงู ูโฺฉูู.
# โ ุขุฑู ุนู ูฺฏุงูุช ููุทู ู ูุงูุนโุจูุงููโุณุชุ
# โ ูู ุนู ุงูู ุจู ุงุญุณุงุณุงุช ู ุดุฑุงุท ูุฑุฏ ูฺฏุงู ูโฺฉูุ
# โ ููโุฏููู ุนู ฺฏุงู ุงูโุทูุฑ ฺฏุงู ุงููโุทูุฑ.""",
#         "dimension": "TF",
#         "direction": "T"
#     },
#     {
#         "text": """0๏ธโฃ2๏ธโฃ ููุช ูุฑุงุฑู ฺฉุงุฑ ุฑู ุงูุฌุงู ุจุฏูุ ุงุฒ ูุจู ูุณุฑุดู ูุดุฎุต ูโฺฉูู.
# โ ุขุฑู ุนู ุฏูู ู ุงูู ุทุฑุญโุฑุฒโุงุ
# โ ูู ุนู ุจุดุชุฑ ุจู ุญุณ ูุญุธูโุง ุชฺฉู ูโฺฉูุ
# โ ููโุฏููู ุนู ูุฑ ุฏู ุฑู ุชุฌุฑุจู ฺฉุฑุฏ.""",
#         "dimension": "JP",
#         "direction": "J"
#     },
#     {
#         "text": """1๏ธโฃ2๏ธโฃ ุจุดุชุฑ ููุชุง ุดุฑูุน ฺฏูุชฺฏู ุจุง ูู ูุณุช ูู ุฏูุณุช ุฏุงุฑู ุชูุด ุจูููู.
# โ ุขุฑู ุนู ุดูููุฏูโุง ูู ุงุฑุชุจุงุท ุงุฌุชูุงุน ุฑู ุฏูุณุช ุฏุงุฑุ
# โ ูู ุนู ุชุฑุฌุญ ูโุฏ ุณฺฉูุช ฺฉู ุง ฺฉูุงู ูุงุฑุฏ ฺฏูุชฺฏู ูุดุ
# โ ููโุฏููู ุนู ฺฏุงู ุดุฑูุน ูโฺฉู ฺฏุงู ูู.""",
#         "dimension": "EI",
#         "direction": "E"
#     },
#     {
#         "text": """2๏ธโฃ2๏ธโฃ ุจู ฺุฒุง ุนูุงูู ุฏุงุฑู ฺฉู ุจุชููู ููุณุดูู ฺฉูู ู ูุงูุน ุจุงุดู.
# โ ุขุฑู ุนู ุจุง ุนูุช ู ูุงูุนุช ุฑุงุญุชโุชุฑุ
# โ ูู ุนู ููุงูู ุฐูู ุจุฑุงุช ุฌุฐุงุจโุชุฑูุ
# โ ููโุฏููู ุนู ูุฑ ุฏู ุณุจฺฉ ุจุฑุงุช ูููู.""",
#         "dimension": "SN",
#         "direction": "S"
#     },
#     {
#         "text": """3๏ธโฃ2๏ธโฃ ุงฺฏู ุงุญุณุงุณ ฺฉุณ ูุฎุงูู ูุงูุนุชู ุจุงุดูุ ูุงูุนุช ุฑู ุชุฑุฌุญ ูโุฏู.
# โ ุขุฑู ุนู ูุงูุนโูฺฏุฑ ุญุช ุงฺฏู ุณุฎุช ุจุงุดูุ
# โ ูู ุนู ุงูู ุงุญุณุงุณุงุช ุทุฑู ุฑู ุฏุฑ ูุธุฑ ูโฺฏุฑุ
# โ ููโุฏููู ุนู ุจุณุชฺฏ ุจู ูููุนุช ุฏุงุฑู.""",
#         "dimension": "TF",
#         "direction": "T"
#     },
#     {
#         "text": """4๏ธโฃ2๏ธโฃ ูุจู ุงุฒ ุดุฑูุน ูุฑ ฺุฒ ุฏูุณุช ุฏุงุฑู ุจุฏููู ุจู ฺฉุฌุง ุฎุชู ูโุดู.
# โ ุขุฑู ุนู ุขูุฏูโูฺฏุฑ ู ูุญุชุงุทุ
# โ ูู ุนู ุฑุณฺฉโูพุฐุฑ ู ุงูู ุชุฌุฑุจูโุงุ
# โ ููโุฏููู ุนู ฺฏุงู ุจุฑูุงููโุฑุฒ ฺฏุงู ุงูู ุฑุณฺฉ.""",
#         "dimension": "JP",
#         "direction": "J"
#     },
#     {
#         "text": """5๏ธโฃ2๏ธโฃ ุงุฑุชุจุงุท ฺฏุฑูุชู ุจุง ุขุฏูโูุง ุฌุฏุฏ ุจุฑุงู ุฑุงุญุชู.
# โ ุขุฑู ุนู ุจุฑููโฺฏุฑุง ู ุณุฑุน ุงุฑุชุจุงุทโฺฏุฑุ
# โ ูู ุนู ุฏุฑููโฺฏุฑุง ู ูุญุชุงุท ุชู ุดุฑูุน ุงุฑุชุจุงุทุ
# โ ููโุฏููู ุนู ุจุณุชฺฏ ุจู ุทุฑู ู ูุถุง ุฏุงุฑู.""",
#         "dimension": "EI",
#         "direction": "E"
#     },
#     {
#         "text": """6๏ธโฃ2๏ธโฃ ุจู ุฌุง ุชุฎูุ ุจุดุชุฑ ูุงูุนุชโูุง ูุงุจู ุงูุฏุงุฒูโฺฏุฑ ุจุฑุงู ุฌุงูุจู.
# โ ุขุฑู ุนู ูุงูุนโุจู ู ุนูู ุจูุฏู ุจุฑุงุช ุงุฑุฒุดููุฏูุ
# โ ูู ุนู ุชุฎู ู ุงุฏูโูพุฑุฏุงุฒ ุฑู ุชุฑุฌุญ ูโุฏุ
# โ ููโุฏููู ุนู ูุฑ ุฏู ุจุฑุงุช ุฌุฐุงุจู.""",
#         "dimension": "SN",
#         "direction": "S"
#     },
#     {
#         "text": """7๏ธโฃ2๏ธโฃ ุนุฏุงูุช ุฑู ุจู ููุฏู ุชุฑุฌุญ ูโุฏู ููุช ุจุงุฏ ุงูุชุฎุงุจ ฺฉูู.
# โ ุขุฑู ุนู ุงุตููโฺฏุฑุง ู ููุตูุ
# โ ูู ุนู ุงุญุณุงุณ ู ููุฏูุงูู ุชุตูู ูโฺฏุฑุ
# โ ููโุฏููู ุนู ุชูุงุฒู ุจู ุนูู ู ุงุญุณุงุณ ุฑู ุญูุธ ูโฺฉู.""",
#         "dimension": "TF",
#         "direction": "T"
#     },
#     {
#         "text": """8๏ธโฃ2๏ธโฃ ููุช ุจุฏูู ุจุฑูุงููโุฑุฒ ฺฉุงุฑ ูพุด ุจุงุฏุ ุญุณ ุฎูุจ ูุฏุงุฑู.
# โ ุขุฑู ุนู ุจุฑูุงููโุฑุฒ ุจุฑุงุช ูุงุฒููุ
# โ ูู ุนู ุงูู ูุฌุงู ู ุจโุจุฑูุงูฺฏ ูุณุชุ
# โ ููโุฏููู ุนู ุจุนุถ ููุชุง ุจุฑูุงููโุฑุฒุ ุจุนุถ ููุชุง ุขุฒุงุฏ.""",
#         "dimension": "JP",
#         "direction": "J"
#     },
#     {
#         "text": """9๏ธโฃ2๏ธโฃ ุชู ฺฏุฑูู ุจูุฏู ุจุฑุงู ุงููุงูโุจุฎุดู.
# โ ุขุฑู ุนู ุชุนุงูู ุงุฌุชูุงุน ุจูุช ุงูฺฏุฒู ูโุฏูุ
# โ ูู ุนู ุชู ุฎููุช ุจูุชุฑ ูฺฉุฑ ูโฺฉูุ
# โ ููโุฏููู ุนู ุจุณุชฺฏ ุจู ฺฏุฑูู ุฏุงุฑู.""",
#         "dimension": "EI",
#         "direction": "E"
#     },
#     {
#         "text": """0๏ธโฃ3๏ธโฃ ุจุดุชุฑ ุฏูุณุช ุฏุงุฑู ูุงูุนุชโูุง ุฑู ุจุจูู ุชุง ุงูฺฉู ุฏูุจุงู ฺุฒุง ูพููุงู ุจุงุดู.
# โ ุขุฑู ุนู ุจูโุตูุฑุช ุนู ู ูุงูุน ูฺฉุฑ ูโฺฉูุ
# โ ูู ุนู ุจู ูุนูุงูุง ู ฺุฒุง ุฒุฑุณุทุญ ุนูุงููโุฏุงุฑุ
# โ ููโุฏููู ุนู ุจู ูุฑ ุฏู ุชูุฌู ูโฺฉู.""",
#         "dimension": "SN",
#         "direction": "S"
#     },
#     {
#         "text": """1๏ธโฃ3๏ธโฃ ููุช ูุถุงูุช ูโฺฉููุ ูโุฎูุงู ูุถุงูุชู ุงุฒ ูุธุฑ ููุทู ุฏุฑุณุช ุจุงุดู.
# โ ุขุฑู ุนู ุฏูุจุงู ุนุฏุงูุช ู ุงุณุชุฏูุงูุ
# โ ูู ุนู ุจุดุชุฑ ุฏู ู ุงุญุณุงุณ ูุถุงูุช ูโฺฉูุ
# โ ููโุฏููู ุนู ุจุณุชฺฏ ุจู ูููุนุช ุฏุงุฑู.""",
#         "dimension": "TF",
#         "direction": "T"
#     },
#     {
#         "text": """2๏ธโฃ3๏ธโฃ ู ุจุฑูุงูู ููุธู ุจุฑุง ุขูุฏู ุจูู ุญุณ ฺฉูุชุฑู ู ุงุนุชูุงุฏ ูโุฏู.
# โ ุขุฑู ุนู ุขูุฏูโูฺฏุฑ ู ูุฏูโุฏุงุฑุ
# โ ูู ุนู ุจุดุชุฑ ุจุง ุญุงู ุฒูุฏฺฏ ูโฺฉูุ
# โ ููโุฏููู ุนู ฺฏุงู ุฏูุจุงู ูุฏูุ ฺฏุงู ููุด ูโฺฉู.""",
#         "dimension": "JP",
#         "direction": "J"
#     }
]





def get_growth_tips_text(mbti_type: str) -> str:
    growth_tips_by_mbti = {
        "INTJ": [
            "- ุจุดุชุฑ ุจู ุงุญุณุงุณุงุช ู ูุงุฒูุง ุฏฺฏุฑุงู ุชูุฌู ฺฉู.",
            "- ฺฏุงู ุงุฌุงุฒู ุจุฏู ฺฉุงุฑูุง ุทุจู ุฌุฑุงู ูพุด ุจุฑูุ ฺฉูุชุฑู ุฑู ฺฉู ุฑูุง ฺฉู.",
            "- ุชูุฑู ฺฉู ุชุง ุงุฏูโูุง ุฑู ุจูโุตูุฑุช ุณุงุฏูโุชุฑ ุจู ุฏฺฏุฑุงู ุชูุถุญ ุจุฏ.",
            "- ุงุฑุชุจุงุท ฺุดู ู ุฒุจุงู ุจุฏู ุฑู ุฌุฏ ุจฺฏุฑ.",
            "- ุตุจุฑ ุจุฑุง ูุชุงุฌ ุจููุฏูุฏุช ุฑู ุฏุฑ ฺฉูุงุฑ ูุฐุช ุงุฒ ูุญุธู ุชูุฑู ฺฉู."
        ],
        "INTP": [
            "- ฺฉุงุฑูุง ุฑู ููุท ุฏุฑ ุฐููุช ุชุญูู ูฺฉูุ ุญุชูุง ุงุฌุฑุงุดูู ฺฉู.",
            "- ุชุนูุฏ ุจู ูพุงุงูโุฏุงุฏู ูพุฑูฺูโูุง ุฑู ุชูุฑู ฺฉู.",
            "- ุจู ุฌุง ูพฺุฏู ฺฉุฑุฏู ููู ฺุฒุ ุณุงุฏู ูฺฉุฑ ฺฉู.",
            "- ุฏุฑุจุงุฑู ุงุญุณุงุณุงุชุช ุจุง ุฏฺฏุฑุงู ุตุญุจุช ฺฉู.",
            "- ุชูุฑู ฺฉู ุฏุฑ ูุญุธู ุฒูุฏฺฏ ฺฉูุ ูู ููุท ุฏุฑ ุงุฏูโูุง."
        ],
        "ENTJ": [
            "- ุจุง ุฏูุณูุฒ ุจุดุชุฑ ูุฏุฑุช ฺฉูุ ูู ููุท ุจุง ููุทู.",
            "- ุงุฏ ุจฺฏุฑ ฺฏูุด ุฏุงุฏู ูุนุงูุงูู ูููโุชุฑ ุงุฒ ุตุญุจุช ฺฉุฑุฏูู.",
            "- ุฏุฑ ุจุญุซโูุง ุฏูุจุงู ุจุฑุฏู ูุจุงุดุ ุฏูุจุงู ูููุฏู ุจุงุด.",
            "- ุจุง ุงูุฑุงุฏ ุขุฑุงูโุชุฑ ู ุงุญุณุงุณโุชุฑ ููุฏู ฺฉู.",
            "- ฺฏุงู ุชููู ฺฉู ู ุจู ุฎูุฏุช ูู ุชูุฌู ฺฉู."
        ],
        "ENTP": [
            "- ุจู ูพุงุงู ุฑุณุงูุฏู ฺฉุงุฑูุง ุฑู ุจูโุงูุฏุงุฒู ุดุฑูุนโุดูู ุฌุฏ ุจฺฏุฑ.",
            "- ุจู ุงุญุณุงุณุงุช ุฏฺฏุฑุงู ุญุณุงุณโุชุฑ ุจุงุด.",
            "- ุจุดโูุนุงูุช ุจุงุนุซ ุจโุซุจุงุช ุฐูู ูุดูุ ุชูุฑฺฉุฒ ุชูุฑู ฺฉู.",
            "- ุชูฺฉุฑ ุจููุฏูุฏุช ุฑู ุชููุช ฺฉู.",
            "- ฺฏุงู ุจุฏูู ุดูุฎ ฺฉุฑุฏูุ ููุท ฺฏูุด ฺฉู."
        ],
        "INFJ": [
            "- ุฒุงุฏ ุงุฒ ุฎูุฏุช ุชููุน ูุฏุงุดุชู ุจุงุดุ ฺฉุงููโฺฏุฑุง ุณูู.",
            "- ุฏุฑุจุงุฑู ูุงุฒูุง ุฎูุฏุช ูู ุญุฑู ุจุฒูุ ูู ููุท ุฏฺฏุฑุงู.",
            "- ุจู ุงุญุณุงุณ ฺฏูุงู ุจุฑุง ูู ฺฏูุชู ุบูุจู ฺฉู.",
            "- ุฒูุงู ุจุฑุง ุชููุง ููุธู ุฏุงุดุชู ุจุงุด.",
            "- ุงูุฑฺโุชู ุจโูููู ุฎุฑุฌ ูฺฉูุ ุดุงุฑฺ ุฏูุจุงุฑู ุถุฑูุฑู."
        ],
        "INFP": [
            "- ุฏูุจุงู ฺฉูุงู ูุทูู ูุจุงุดุ ูุงูุนโุจู ุจุงุด.",
            "- ุจู ุฌุง ุนูุจโูุดู ุงุฒ ุชูุดุ ุชูุฑู ููุงุฌูู ฺฉู.",
            "- ุงุญุณุงุณุงุช ุฑู ุจููุณ ุง ุจุฑูุฒ ุจุฏูุ ูู ููุท ุฏุฑ ุฏู ูฺฏู ุฏุงุฑ.",
            "- ุณุงุฎุชุงุฑ ุฑูุฒุงูู ูโุชููู ฺฉูฺฉ ฺฉูู ุชูุฑฺฉุฒุช ุจุดุชุฑ ุดู.",
            "- ุชุตููโฺฏุฑ ุฑู ุชูุฑู ฺฉูุ ุญุช ุงฺฏู ููุดู ุญุณ ุฏุฑุณุช ูุฏุงุฑ."
        ],
        "ENFJ": [
            "- ฺฏุงู ุงูููุชโ ุฑู ุฎูุฏุช ุจุฐุงุฑุ ูู ููุท ุฏฺฏุฑุงู.",
            "- ูุฑุฒ ูุดุฎุต ุจู ฺฉูฺฉ ฺฉุฑุฏู ู ุฎุณุชู ฺฉุฑุฏู ุฎูุฏุช ุฏุงุดุชู ุจุงุด.",
            "- ุงุฒ ุขุณุจโูพุฐุฑ ูุฑุงุฑ ูฺฉูุ ูุงูุน ุจูุฏู ูุฏุฑุช ุฏุงุฑู.",
            "- ููุดู ูุณุฆูู ุงุญุณุงุณ ุฏฺฏุฑุงู ูุณุช.",
            "- ุจุฑุง ุฑุดุฏ ุฎูุฏุช ูู ููุช ุจุฐุงุฑุ ูู ููุท ูุฏุงุช ุฏฺฏุฑุงู."
        ],
        "ENFP": [
            "- ฺฉุงุฑ ูุงุชููู ุฒุงุฏ ูุดูุ ุจู ูพุงุงู ุจุฑุณูู.",
            "- ุงุญุณุงุณุงุชุชู ุฏุณุชูโุจูุฏ ู ูุฏุฑุช ฺฉู.",
            "- ุงุฒ ุชูุฌู ุฏฺฏุฑุงู ุงูุฑฺ ูโฺฏุฑ ูู ูุงุฒ ุจู ุชููุง ูู ุฏุงุฑ.",
            "- ุฑู ูุธู ุดุฎุต ุจุดุชุฑ ุชูุฑู ฺฉู.",
            "- ุงุฏ ุจฺฏุฑ ูู ฺฏูุชู ูู ุจุฎุด ุงุฒ ุฎูุฏุดูุงุณู."
        ],
        "ISTJ": [
            "- ุงูุนุทุงูโูพุฐุฑ ุฑู ุชูุฑู ฺฉูุ ููุดู ุจุฑูุงูู ุฌูุงุจ ููโุฏู.",
            "- ฺฏุงู ุงุฒ ุชุฌุฑุจูโูุง ุฌุฏุฏ ูุชุฑุณ.",
            "- ููุท ฺูู ูุงููููุ ุฏูู ุจุฑ ุฏุฑุณุช ุจูุฏูุด ูุณุช.",
            "- ุงุญุณุงุณุงุชุช ุฑู ูุงุฏุฏู ูฺฏุฑ.",
            "- ุตููุช ุฑู ุจุง ฺฉูุชุฑู ุงุดุชุจุงู ูฺฏุฑ."
        ],
        "ISFJ": [
            "- ูุฑุฒ ุดุฎุตโุช ุฑู ูุดุฎุต ฺฉูุ ูุฏุงฺฉุงุฑ ุจโุญุฏ ุฎูุจ ูุณุช.",
            "- ูฺฏุฑุงู ุฏุฑุจุงุฑู ูููุ ุจู ุฎูุฏุช ุขุณุจ ูโุฒูู.",
            "- ูุฎุงููุช ุฑู ุชูุฑู ฺฉูุ ูุงุฒูู ุจุฑุง ุฑุดุฏ.",
            "- ุชูุฑฺฉุฒ ฺฉู ุฑู ุงูุฏุงู ุฎูุฏุช ูู.",
            "- ุงุฒ ุชููุง ูุชุฑุณุ ูุฑุตุช ุจุฑุง ุจุงุฒุงุจ ู ุชูฺฉุฑู."
        ],
        "ESTJ": [
            "- ุณุฎุชโฺฏุฑ ุจุด ุงุฒ ุญุฏ ุจุงุนุซ ูุฑุณูุฏฺฏ ูุดู.",
            "- ฺฉูุชุฑู ููู ฺุฒ ููฺฉู ูุณุชุ ูพุฐุฑุด ุชูุฑู ฺฉู.",
            "- ุจู ุงุญุณุงุณุงุช ุงุทุฑุงูุงู ุชูุฌู ุจุดุชุฑ ุฏุงุดุชู ุจุงุด.",
            "- ฺฏุงู ุณฺฉูุช ุงุฒ ูุฏุฑุช ุจุดุชุฑู.",
            "- ุจุดุชุฑ ุงุฒ ุฏุณุชูุฑ ุฏุงุฏูุ ุงููุงู ุจุจุฎุด."
        ],
        "ESFJ": [
            "- ูุงุฒ ูุณุช ููุดู ูุญุจูุจ ุจุงุด.",
            "- ุงุฒ ูุงุจุณุชฺฏ ุจู ุชุงุฏ ุฏฺฏุฑุงู ูุงุตูู ุจฺฏุฑ.",
            "- ุฒูุงูโูุง ุจุฑุง ุฎูุฏุช ุชูุธู ฺฉูุ ูู ููุท ุจุฑุง ุฎุฏูุช.",
            "- ุชุตููโฺฏุฑ ูุณุชูู ุชูุฑู ฺฉู.",
            "- ูุฎุงููุชโูุง ุฑู ุดุฎุต ูฺฏุฑ."
        ],
        "ISTP": [
            "- ุงุญุณุงุณุงุชุช ุฑู ุณุฑฺฉูุจ ูฺฉูุ ุชุญููโุดูู ฺฉู.",
            "- ุจุฑูุงููโุฑุฒ ูู ูุงุฒููุ ูู ููุท ูุญุธูโุง ุชุตูู ฺฏุฑูุชู.",
            "- ุฑูุงุจุท ุฑู ูุซู ูพุฑูฺู ูฺฏุงู ูฺฉู.",
            "- ุจู ุฏฺฏุฑุงู ูุฑุตุช ุจุฏู ฺฉูุงุฑุช ุงุญุณุงุณ ุงููุช ฺฉูู.",
            "- ฺฏุงู ุณฺฉูู ูู ุฑุดุฏูุ ูู ููุท ุญุฑฺฉุช."
        ],
        "ISFP": [
            "- ุชุตููโฺฏุฑ ุณุฑุนโุชุฑ ุชูุฑู ฺฉู.",
            "- ูุงุฒ ุจู ุขุฑุงูุดุ ุฏูู ูุฑุงุฑ ุงุฒ ุชุบุฑ ูุณุช.",
            "- ููุฑ ุฑู ุจุง ุณุงุฎุชุงุฑ ููุฑุงู ฺฉู.",
            "- ุงุญุณุงุณุงุชุช ุงุฑุฒุดููุฏ ูุณุชูุ ุญุช ุงฺฏู ุจูู ุฏุฑฺฉุด ูฺฉูู.",
            "- ุจุง ุชุฑุณ ุงุฒ ูุถุงูุช ุฑูุจูโุฑู ุดู."
        ],
        "ESTP": [
            "- ฺฏุงู ุชููู ฺฉู ู ูฺฉุฑ ฺฉู ูุจู ุงุฒ ุนูู.",
            "- ุนูู ุงุฑุชุจุงุท ุฑู ูุฏุง ูุฌุงู ูฺฉู.",
            "- ุจููุฏูุฏุช ูฺฉุฑ ฺฉูุ ูู ููุท ูุญุธูโุง.",
            "- ุจู ุงุญุณุงุณุงุช ุฏฺฏุฑุงู ุจโุชูุงูุช ูุจุงุด.",
            "- ุงุฑุฒุด ุฏุงุฑ ุญุช ููุช ุขุฑุงู."
        ],
        "ESFP": [
            "- ุชููุง ุฑู ุจูโุนููุงู ุจุฎุด ุงุฒ ุชุนุงุฏู ุจูพุฐุฑ.",
            "- ููุท ุจุง ุณุฑฺฏุฑู ุฑุดุฏ ููโฺฉูุ ุณุงุฎุชุงุฑ ูู ูููู.",
            "- ูุฑ ุญุฑู ุฑู ูุงุฒ ูุณุช ุจฺฏ.",
            "- ุจุง ุจุฑูุงูู ุฌูู ุฑูุชู ุชูุฑู ฺฉู.",
            "- ุจู ุฌุง ูุฑุงุฑ ุงุฒ ูุงุฑุงุญุชุ ุชุฌุฑุจูโุด ฺฉู."
        ]
    }

    tips = growth_tips_by_mbti.get(mbti_type.upper())
    if not tips:
        return "ุชูุตูโุง ุจุฑุง ุงู ุชูพ ุดุฎุตุช ุซุจุช ูุดุฏู ุงุณุช."

    text = "๐ฑ ุชูุตูโูุง ุฑุดุฏ ุดุฎุต ุจุฑุง ุชูพ ุดูุง:\n" + "\n".join(tips)
    return text





def get_job_suggestions_text(mbti_type: str) -> str:
    job_suggestions_by_mbti = {
        "INTJ": [
            "๐ง ูุนูุงุฑ ุณุณุชูโูุง (Systems Architect)",
            "๐ ุชุญููโฺฏุฑ ุฏุงุฏู (Data Analyst)",
            "๐ฌ ูพฺููุดฺฏุฑ ุนููู ุดูุงุฎุช",
            "๐๏ธ ูุฏุฑ ูพุฑูฺูโ ูพฺุฏู",
            "๐ ูุดุงูุฑ ุงุณุชุฑุงุชฺฺฉ"
        ],
        "INTP": [
            "๐ ูุญูู ุง ูพฺููุดฺฏุฑ (Researcher)",
            "๐ป ุจุฑูุงููโููุณ ุงุฑุดุฏ",
            "๐ ุฏุงูุดููุฏ ุฏุงุฏู (Data Scientist)",
            "๐งฉ ุชุญููโฺฏุฑ ูุณุงุฆู ูพฺุฏู",
            "โ๏ธ ุทุฑุงุญ ุงูฺฏูุฑุชู"
        ],
        "ENTJ": [
            "๐ข ูุฏุฑ ุงุฌุฑุง (CEO)",
            "๐จโ๐ผ ุฑูุจุฑ ุชู ูู",
            "๐ ุชุญููโฺฏุฑ ูุงู",
            "๐ง ูุดุงูุฑ ฺฉุณุจโูฺฉุงุฑ",
            "๐ ูุฏุฑ ุชูุณุนู ุงุณุชุฑุงุชฺฺฉ"
        ],
        "ENTP": [
            "๐ ฺฉุงุฑุขูุฑู ุฎูุงู",
            "๐ก ูุฏุฑ ููุขูุฑ",
            "๐ฃ ุงุณุชุฑุงุชฺุณุช ุจุงุฒุงุฑุงุจ",
            "๐ง ูุดุงูุฑ ุจุฑูุฏูฺฏ",
            "๐๏ธ ูุฎุชุฑุน ุง ููุขูุฑ"
        ],
        "INFJ": [
            "๐งโโ๏ธ ุฑูุงูโุฏุฑูุงูฺฏุฑ (Therapist)",
            "๐ฃ๏ธ ูุดุงูุฑ ุฑุดุฏ ูุฑุฏ",
            "๐ ููุณูุฏู ุง ุดุงุนุฑ",
            "๐ญ ุงุณุชุฑุงุชฺุณุช ูุฑููฺฏ",
            "๐ค ุณุฎูุฑุงู ุงููุงูโุจุฎุด"
        ],
        "INFP": [
            "๐ ููุณูุฏู ุฎูุงู",
            "๐จ ููุฑููุฏ ุง ุทุฑุงุญ",
            "๐งโ๐ซ ูุดุงูุฑ ูุฑุฏ",
            "๐ ูุนุงู ุงุฌุชูุงุน",
            "๐ฌ ูููโูุงููโููุณ"
        ],
        "ENFJ": [
            "๐ค ุณุฎูุฑุงู ุงูฺฏุฒุด",
            "๐ค ูุฏุฑ ููุงุจุน ุงูุณุงู",
            "๐ง ุฑูุงูุดูุงุณ ุง ฺฉูฺ ูุฑุฏ",
            "๐ซ ุขููุฒฺฏุงุฑ ุงููุงูโุจุฎุด",
            "๐ฏ ูุฑุจ ุฑุดุฏ ูุฑุฏ"
        ],
        "ENFP": [
            "๐ข ุจุงุฒุงุฑุงุจ ุฎูุงู",
            "๐ญ ูุฌุฑ ุง ุจุงุฒฺฏุฑ",
            "โ๏ธ ุณูุฑูุงููโููุณ",
            "๐๏ธ ูุนุงู ุงุฌุชูุงุน",
            "๐ฑ ูุฏุฑ ฺฉููพูโูุง ุชุจูุบุงุช"
        ],
        "ISTJ": [
            "๐๏ธ ุงูุณุฑ ูุธุงู",
            "๐ ูุฏุฑ ูพุฑูฺูโ ูู",
            "๐งพ ุญุณุงุจุฏุงุฑ ุฏูู",
            "๐ ุชุญููโฺฏุฑ ุฏุงุฏู",
            "๐๏ธ ูููุฏุณ ุณุงุฒู"
        ],
        "ISFJ": [
            "๐ฉโโ๏ธ ูพุฑุณุชุงุฑ ุง ูพุฒุดฺฉ ุนููู",
            "๐ฉโ๐ซ ูุนูู ุง ูุฑุจ ฺฉูุฏฺฉ",
            "๐งโ๐คโ๐ง ูุฏุฏฺฉุงุฑ ุงุฌุชูุงุน",
            "๐ซ ูุฏุฑ ูุฏุฑุณู",
            "๐ ุฏุจุฑ ุงููุฑ ูุฑููฺฏ"
        ],
        "ESTJ": [
            "๐งโ๐ผ ูุฏุฑ ุณุงุฒูุงู",
            "๐ ุชุญููโฺฏุฑ ูุงู",
            "โ๏ธ ูุงุถ ุง ุญูููโุฏุงู",
            "๐ ฺฉุงุฑุดูุงุณ ฺฉูุชุฑู ฺฉูุช",
            "๐๏ธ ุงูุณุฑ ุงุฑุดุฏ"
        ],
        "ESFJ": [
            "๐จโ๐ซ ูุดุงูุฑ ุชุญุตู ุง ุฎุงููุงุฏู",
            "๐ ูุนูู ุฏุจุฑุณุชุงู",
            "๐ฃ๏ธ ูุฏุฑ ุฑูุงุจุท ุนููู",
            "๐ ูุฏุฑ ูุฑูุด",
            "๐ ูุฑุจ ููููุช ุชุญุตู"
        ],
        "ISTP": [
            "๐๏ธ ุชฺฉูุณู ูู",
            "โ๏ธ ูููุฏุณ ูฺฉุงูฺฉ",
            "๐ ูุญูู ุฌูุง",
            "๐๏ธ ูุงุฌุฑุงุฌู ุง ุชุนูุฑฺฉุงุฑ",
            "๐ ุงูุณุฑ ูพูุณ ูู"
        ],
        "ISFP": [
            "๐๏ธ ููุฑููุฏ ุชุตูุฑ",
            "๐ธ ุนฺฉุงุณ ุญุฑููโุง",
            "๐ ุทุฑุงุญ ูุจุงุณ ุง ูุฏ",
            "๐ผ ููุงุฒูุฏู ุง ุขููฺฏุณุงุฒ",
            "๐ ุทุฑุงุญ ุฏุงุฎู"
        ],
        "ESTP": [
            "๐งโ๐ผ ุจุงุฒุงุฑุงุจ ุญุถูุฑ",
            "๐งโ๐ง ฺฉุงุฑุดูุงุณ ูุฑูุด ุญุฑููโุง",
            "๐ ุขุชุดโูุดุงู ุง ุงูุฏุงุฏฺฏุฑ",
            "๐๏ธ ูุฑุจ ูุฑุฒุด",
            "๐ ฺฉุงุฑุขูุฑู ูุฏุงู"
        ],
        "ESFP": [
            "๐บ ูุฌุฑ ุชููุฒูู",
            "๐ญ ุจุงุฒฺฏุฑ ุง ุฎูุงููุฏู",
            "๐ ุทุฑุงุญ ุฑูุฏุงุฏ",
            "๐ฑ ูุฏุฑ ุดุจฺฉูโูุง ุงุฌุชูุงุน",
            "๐งณ ุณูุฑูุงููโุณุงุฒ"
        ]
    }

    jobs = job_suggestions_by_mbti.get(mbti_type.upper())
    if not jobs:
        return "ุดุบูโูุง ูพุดููุงุฏ ุจุฑุง ุงู ุชูพ ุดุฎุตุช ุซุจุช ูุดุฏูโุงูุฏ."

    text = "๐ผ ุดุบูโูุง ูพุดููุงุฏ:\n" + "\n".join(f"- {job}" for job in jobs)
    return text



def get_famous_people_text(mbti_type: str) -> str:
    famous_people_by_mbti = {
        "INTJ": [
            "- ุงููู ูุงุณฺฉ (Elon Musk)",
            "- ูุงุฑฺฉ ุฒุงฺฉุฑุจุฑฺฏ (Mark Zuckerberg)",
            "- ุขุฑูููุฏ ุดูุงุฑุชุฒูฺฏุฑ (Arnold Schwarzenegger)",
            "- ููุงุฑ ฺฉููุชูู (Hillary Clinton)",
            "- ูุฑุงูุณุณ ุจฺฉู (Francis Bacon)"
        ],
        "INTP": [
            "- ุขูุจุฑุช ุงูุดุชู (Albert Einstein)",
            "- ูุฆููุงุฑุฏู ุฏุงููฺ (Leonardo da Vinci)",
            "- ูุฏ ฺฏุงฺฏุง (Lady Gaga)",
            "- ุงุฒุงฺฉ ููุชูู (Isaac Newton)",
            "- ุจู ฺฏุชุณ (Bill Gates)"
        ],
        "ENTJ": [
            "- ุงุณุชู ุฌุงุจุฒ (Steve Jobs)",
            "- ฺฏูุฑุฏูู ุฑุงูุฒ (Gordon Ramsay)",
            "- ูุงุฑฺฏุงุฑุช ุชุงฺุฑ (Margaret Thatcher)",
            "- ูุฑุงูฺฉูู ุฑูุฒููุช (Franklin D. Roosevelt)",
            "- ฺุงุฑูุฒ ุฏุงุฑูู (Charles Darwin)"
        ],
        "ENTP": [
            "- ุชููุงุณ ุงุฏุณูู (Thomas Edison)",
            "- ุฑฺุงุฑุฏ ุจุฑุงูุณูู (Richard Branson)",
            "- ูุงฺฉู ุฌุฑุฏู (Michael Jordan)",
            "- ุจู ูุฑุงูฺฉูู (Benjamin Franklin)",
            "- ุณุงุฑุง ุณููุฑูู (Sarah Silverman)"
        ],
        "INFJ": [
            "- ูุงุฑุชู ููุชุฑ ฺฉูฺฏ (Martin Luther King Jr.)",
            "- ููุณูู ูุงูุฏูุง (Nelson Mandela)",
            "- ููุงุชูุง ฺฏุงูุฏ (Mahatma Gandhi)",
            "- ุงููพุฑุง ูููุฑ (Oprah Winfrey)",
            "- ฺฉุงุฑู ููฺฏ (Carl Jung)"
        ],
        "INFP": [
            "- ููุงู ุดฺฉุณูพุฑ (William Shakespeare)",
            "- ุฌุงู ุฏูพ (Johnny Depp)",
            "- ุฌุงูุงุชุงู ูุฑุงูุฒู (Jonathan Franzen)",
            "- ุฌู ฺฉุฑ (Jim Carrey)",
            "- ฺฉูุฑุช ฺฉูุจู (Kurt Cobain)"
        ],
        "ENFJ": [
            "- ุจุงุฑุงฺฉ ุงูุจุงูุง (Barack Obama)",
            "- ุฌููุฑ ูุงูุฑูุณ (Jennifer Lawrence)",
            "- ูุช ุฏููู (Matt Damon)",
            "- ุจูู ุฌูู (Jon Bon Jovi)",
            "- ูุงุฑุชุง ุงุณุชูุงุฑุช (Martha Stewart)"
        ],
        "ENFP": [
            "- ุฑุงุจู ููุงูุฒ (Robin Williams)",
            "- ฺุงุฑู ฺุงูพูู (Charlie Chaplin)",
            "- ูุงุฑุง ฺฉุฑ (Mariah Carey)",
            "- ุณูุฒุงู ุณุงุฑุงูุฏูู (Susan Sarandon)",
            "- ูุงูุช ุฏุฒู (Walt Disney)"
        ],
        "ISTJ": [
            "- ุฌูุฑุฌ ูุงุดูฺฏุชู (George Washington)",
            "- ูฺฏุงู ูุงุฑฺฉู (Meghan Markle)",
            "- ุฌูุฑุณูู ุฏูุณ (Jefferson Davis)",
            "- ููู ฺฉูุฑ (Helen Keller)",
            "- ูุงูุช ุฏุฒู (Walt Disney)"
        ],
        "ISFJ": [
            "- ฺฉุงุชุฑู ุฏูู (Catherine the Great)",
            "- ููฺฉู ูฺฉุชูุฑุง (Queen Victoria)",
            "- ุจุช ูุงุช (Betty White)",
            "- ูุงุฏุฑ ุชุฑุฒุง (Mother Teresa)",
            "- ุฑุงุงู ุฑูููุฏุฒ (Ryan Reynolds)"
        ],
        "ESTJ": [
            "- ุฏููุงูุฏ ุชุฑุงููพ (Donald Trump)",
            "- ุฌู ูุงูุฏุง (Jane Fonda)",
            "- ูุฑุณูู ููุฑุฏ (Harrison Ford)",
            "- ุฌู ุจุฒูุณ (Jeff Bezos)",
            "- ุขุฏููู ูุชูุฑ (Adolf Hitler)"
        ],
        "ESFJ": [
            "- ุชููุฑ ุณูุฆูุช (Taylor Swift)",
            "- ูู ุฌฺฉูู (Hugh Jackman)",
            "- ุจุงูุณู (Beyoncรฉ)",
            "- ุจู ฺฉููุชูู (Bill Clinton)",
            "- ุฌููุง ุฑุงุจุฑุชุฒ (Julia Roberts)"
        ],
        "ISTP": [
            "- ฺฉููุช ุงุณุชููุฏ (Clint Eastwood)",
            "- ูุงฺฉู ุฌฺฉุณูู (Michael Jackson)",
            "- ุจุฑ ูุงุฑุณูู (Brie Larson)",
            "- ุฌุงู ูู (John Wayne)",
            "- ุจุฑูุณู (Bruce Lee)"
        ],
        "ISFP": [
            "- ูฺฉ ุฌฺฏุฑ (Mick Jagger)",
            "- ูุงุง ุขูุฌูู (Maya Angelou)",
            "- ุจุฑุฏ ูพุช (Brad Pitt)",
            "- ูพุฑูุณุณ ุฏุงุงูุง (Princess Diana)",
            "- ุฌููุฑ ุงูุณุชูู (Jennifer Aniston)"
        ],
        "ESTP": [
            "- ุฏููุงูุฏ ุชุฑุงููพ (Donald Trump)",
            "- ุงุฑฺฉุง ุจุงุฏู (Erykah Badu)",
            "- ุฏูุฏ ุจฺฉูุงู (David Beckham)",
            "- ุฏูู ฺฉุฑฺฏ (Daniel Craig)",
            "- ุฏูุฌุง ฺฉุช (Doja Cat)"
        ],
        "ESFP": [
            "- ูุงุฑูู ูููุฑู (Marilyn Monroe)",
            "- ูพุงุจูู ูพฺฉุงุณู (Pablo Picasso)",
            "- ุฌู ูุงููู (Jimmy Fallon)",
            "- ุณููุง ฺฏููุฒ (Selena Gomez)",
            "- ุฑุงุจ ูู (Rob Lowe)"
        ]
    }

    people = famous_people_by_mbti.get(mbti_type.upper())
    if not people:
        return "ุงูุฑุงุฏ ูุนุฑูู ุจุฑุง ุงู ุชูพ ุดุฎุตุช ุซุจุช ูุดุฏูโุงูุฏ."

    text = "๐งโ๐ผ ุงูุฑุงุฏ ูุนุฑูู ุจุง ููู ุชูพ:\n" + "\n".join(people)
    return text



def get_strengths_weaknesses_text(mbti_type: str) -> str:
    traits = {
        "INTJ": {
            "strengths": [
                "โ ูุฏูโฺฏุฑุง ู ุจุง ุจุฑูุงูู",
                "โ ุชูฺฉุฑ ุชุญูู ูู",
                "โ ุงูู ุฑุดุฏ ู ูพุดุฑูุช ูุฏุงูู",
                "โ ูุณุชูู ู ุฎูุฏุงุชฺฉุง",
                "โ ุงุณุชุฑุงุชฺุณุช ุนุงู"
            ],
            "weaknesses": [
                "โ ฺฏุงู ุจุด ุงุฒ ุญุฏ ุณุฑุฏ ู ููุทู",
                "โ ูุณูุงุณ ุฏุฑ ฺฉูุงูโฺฏุฑุง",
                "โ ูุงุชูุงู ุฏุฑ ุชุญูู ุงูุฑุงุฏ ฺฉูโูฺฉุฑ",
                "โ ุถุนู ุฏุฑ ุงุจุฑุงุฒ ุงุญุณุงุณุงุช",
                "โ ุชูุงู ุจู ุงูุชูุงุฏ ุฒุงุฏ"
            ]
        },
        "INTP": {
            "strengths": [
                "โ ุฐูู ุฎูุงู ู ุชุญููโฺฏุฑ",
                "โ ุนุงุดู ุงุฏฺฏุฑ ููุงูู ุนูู",
                "โ ูุณุชูู ู ูุชูฺฉุฑ",
                "โ ุชูุฑฺฉุฒ ุจุงูุง ุฑู ูุณุงุฆู ูพฺุฏู",
                "โ ฺฉูุฌฺฉุงู ุจโูพุงุงู"
            ],
            "weaknesses": [
                "โ ุญูุงุณโูพุฑุช ู ูพุฑุงฺฉูุฏฺฏ ุฐูู",
                "โ ุณุฎุช ุฏุฑ ูพุงุฏูโุณุงุฒ ุงุฏูโูุง",
                "โ ุฏูุฑ ุงุฒ ุงุญุณุงุณุงุช ู ุฑูุงุจุท ุนุงุทู",
                "โ ฺฏูโุดุฏู ุฏุฑ ุชูฺฉุฑุงุช ุงูุชุฒุงุน",
                "โ ุจโุงูฺฏุฒฺฏ ุฏุฑ ฺฉุงุฑูุง ุชฺฉุฑุงุฑ"
            ]
        },
        "ENTJ": {
            "strengths": [
                "โ ุฑูุจุฑ ูู ู ุณุงุฒูุงูโุฏููุฏู",
                "โ ูุฏูโูุญูุฑ ู ูุตูู",
                "โ ุฐูู ููุทู ู ุจููุฏูพุฑูุงุฒ",
                "โ ููุงุฑุช ุฏุฑ ูุฏุฑุช ู ุชุตููโฺฏุฑ",
                "โ ุงูฺฏุฒู ุจุงูุง ุจุฑุง ููููุช"
            ],
            "weaknesses": [
                "โ ุณูุทูโุฌู ุจูุฏู",
                "โ ุตุจุฑ ฺฉู ุฏุฑ ุจุฑุงุจุฑ ุงุดุชุจุงู ุฏฺฏุฑุงู",
                "โ ุณุฑุฏ ุจูุฏู ุฏุฑ ุฑูุงุจุท ุนุงุทู",
                "โ ุชูุฑฺฉุฒ ฺฉู ุฑู ุฌุฒุฆุงุช ุงุญุณุงุณ",
                "โ ุนุฌูู ุฏุฑ ุฑุณุฏู ุจู ูุชุฌู"
            ]
        },
        "ENTP": {
            "strengths": [
                "โ ุฎูุงู ู ููุขูุฑ",
                "โ ุณุฎูโูุฑุฒ ูู",
                "โ ุณุงุฒฺฏุงุฑ ู ููุนุทู",
                "โ ฺฉูุฌฺฉุงู ู ุนูุงููโููุฏ ุจู ูุจุงุญุซ ฺุงูุด",
                "โ ุญูโฺฉููุฏู ุนุงู ูุณุงุฆู"
            ],
            "weaknesses": [
                "โ ูุงูพุงุฏุงุฑ ุฏุฑ ุชูุฑฺฉุฒ",
                "โ ุจโูุธู",
                "โ ุงุดุชุงู ุฒุงุฏ ุจู ุดุฑูุน ูู ูู ูพุงุงู ูพุฑูฺูโูุง",
                "โ ุชูุงู ุจู ุจุญุซ ุฒุงุฏ",
                "โ ุจโุญูุตูฺฏ ุณุฑุน"
            ]
        },
        "INFJ": {
            "strengths": [
                "โ ุจูุด ุนูู ู ููุณู",
                "โ ุงูุณุงูโุฏูุณุช ู ูุฏุงฺฉุงุฑ",
                "โ ูุฏูโฺฏุฑุง ู ุจุง ุฑุณุงูุช ูุดุฎุต",
                "โ ุดูููุฏู ุฎูุจ",
                "โ ุชูฺฉุฑ ุนูู ู ุชุญูู"
            ],
            "weaknesses": [
                "โ ูุฑุฒ ุฒุงุฏ ุจุง ุฏฺฏุฑุงู",
                "โ ุญุณุงุณุช ุจุงูุง ุจู ููุฏ",
                "โ ุฎุณุชฺฏ ุงุฒ ุงุฑุชุจุงุท ุฒุงุฏ ุจุง ุฏฺฏุฑุงู",
                "โ ุงุฏูโุขูุณุช ุงูุฑุงุท",
                "โ ุณฺฉูุช ุฏุฑ ููุงูุน ุถุฑูุฑ"
            ]
        },
        "INFP": {
            "strengths": [
                "โ ููุงุฏุงุฑ ู ุตุงุฏู",
                "โ ุฎูุงู ู ููุฑููุฏ",
                "โ ุฏุงุฑุง ุงุฑุฒุดโูุง ูู",
                "โ ุดูููุฏู ุนุงู",
                "โ ุงูู ุฎูุฏุดูุงุณ"
            ],
            "weaknesses": [
                "โ ฺฏูโุดุฏู ุฏุฑ ุฑูุงูุง",
                "โ ุญุณุงุณุช ุจุงูุง ุจู ุงูุชูุงุฏ",
                "โ ุงุฌุชูุงุจ ุงุฒ ุฏุฑฺฏุฑ",
                "โ ููุณุงูุงุช ุงุญุณุงุณ",
                "โ ุชุตููโฺฏุฑ ฺฉูุฏ"
            ]
        },
        "ENFJ": {
            "strengths": [
                "โ ุฏูุณูุฒ ู ุญูุงุชฺฏุฑ",
                "โ ูุฏูโฺฏุฑุง ู ุงููุงูโุจุฎุด",
                "โ ุงุฑุชุจุงุท ูู ุจุง ุฏฺฏุฑุงู",
                "โ ุฏุงุฑุง ุฏุฑฺฉ ุงุฌุชูุงุน ุจุงูุง",
                "โ ุฑุดุฏโุฏููุฏู ู ุชุดููโฺฉููุฏู"
            ],
            "weaknesses": [
                "โ ุญุณุงุณ ุจู ููุฏ",
                "โ ฺฏุงู ุจุด ุงุฒ ุญุฏ ูุฑุจุงู ุฏฺฏุฑุงู",
                "โ ูุงุงูุฏ ุดุฏู ุงุฒ ุฏฺฏุฑุงู",
                "โ ุงุณุชุฑุณโูพุฐุฑ ุจุงูุง",
                "โ ุถุนู ุฏุฑ ฺฏูุชู ยซููยป"
            ]
        },
        "ENFP": {
            "strengths": [
                "โ ูพุฑุงูุฑฺ ู ุฎูุงู",
                "โ ุงุฑุชุจุงุทโฺฏุฑ ุนุงู",
                "โ ูุซุจุชโุงูุฏุด ู ุงูฺฏุฒุด",
                "โ ููุขูุฑ ู ุจุงุฒฺฏูุด",
                "โ ุนูุงููโููุฏ ุจู ุฑูุงุจุท ุนูู"
            ],
            "weaknesses": [
                "โ ูพุฑุงฺฉูุฏฺฏ ุชูุฌู",
                "โ ุถุนู ุฏุฑ ูพฺฏุฑ ฺฉุงุฑูุง",
                "โ ุญุณุงุณ ุจู ุงุณุชุฑุณ",
                "โ ุชูุงู ุจู ุงุฌุชูุงุจ ุงุฒ ุชุนุงุฑุถ",
                "โ ุจโุตุจุฑ"
            ]
        },
        "ISTJ": {
            "strengths": [
                "โ ูุณุฆูู ู ูุงุจู ุงุนุชูุงุฏ",
                "โ ููุธู ู ุฏูู",
                "โ ููุทู ู ูุงูุนโุจู",
                "โ ููุงุฏุงุฑ ู ูพุงุฏุงุฑ",
                "โ ุนููโฺฏุฑุง ู ูุฏูููุฏ"
            ],
            "weaknesses": [
                "โ ุงูุนุทุงูโูุงูพุฐุฑ",
                "โ ุจุงู ูุญุฏูุฏ ุงุญุณุงุณุงุช",
                "โ ุณุฎุชโฺฏุฑ ุจุด ุงุฒ ุญุฏ",
                "โ ููุงููุช ุฏุฑ ุจุฑุงุจุฑ ุชุบุฑุงุช",
                "โ ุชูุงู ุจู ูุถุงูุช ุณุฑุน"
            ]
        },
        "ISFJ": {
            "strengths": [
                "โ ููุฑุจุงู ู ุญูุงุชฺฏุฑ",
                "โ ููุงุฏุงุฑ ู ูุณุฆููุชโูพุฐุฑ",
                "โ ููุธู ู ุฏูู",
                "โ ูุงูุนโุจู ู ููุทู",
                "โ ูุชุนูุฏ ู ุจุง ุงุฎูุงู"
            ],
            "weaknesses": [
                "โ ููุงููุช ุฏุฑ ุจุฑุงุจุฑ ุชุบุฑ",
                "โ ุฏุดูุงุฑ ุฏุฑ ุงุจุฑุงุฒ ูุงุฒูุง",
                "โ ุงุณุชุฑุณโูพุฐุฑ ุจุงูุง",
                "โ ุชูุงู ุจู ุงุฌุชูุงุจ ุงุฒ ุชุนุงุฑุถ",
                "โ ูุญุงูุธูโฺฉุงุฑ"
            ]
        },
        "ESTJ": {
            "strengths": [
                "โ ุณุงุฒูุงูโุฏููุฏู ู ุฑูุจุฑ",
                "โ ุนููโฺฏุฑุง ู ูุฏูููุฏ",
                "โ ููุทู ู ูุงุทุน",
                "โ ูพุฑุงูุฑฺ ู ูุตูู",
                "โ ูุณุฆูู ู ูุงุจู ุงุนุชูุงุฏ"
            ],
            "weaknesses": [
                "โ ุนุฌูู ู ุจโุญูุตูู",
                "โ ุงูุนุทุงูโูุงูพุฐุฑ",
                "โ ุณูุทูโุฌู ู ฺฉูุชุฑูโฺฏุฑ",
                "โ ุญุณุงุณ ุจู ุงูุชูุงุฏ",
                "โ ุฏุดูุงุฑ ุฏุฑ ุงุจุฑุงุฒ ุงุญุณุงุณุงุช"
            ]
        },
        "ESFJ": {
            "strengths": [
                "โ ุงุฌุชูุงุน ู ููุฑุจุงู",
                "โ ุงุฑุชุจุงุทโฺฏุฑ ุนุงู",
                "โ ุญูุงุชฺฏุฑ ู ูุณุฆูู",
                "โ ูุฏูููุฏ ู ูุชุนูุฏ",
                "โ ูุซุจุชโุงูุฏุด ู ูพุฑุงูุฑฺ"
            ],
            "weaknesses": [
                "โ ุญุณุงุณ ุจู ููุฏ",
                "โ ูุงุจุณุชฺฏ ุฒุงุฏ ุจู ูุธุฑ ุฏฺฏุฑุงู",
                "โ ุงุณุชุฑุณโูพุฐุฑ ุจุงูุง",
                "โ ุฏุดูุงุฑ ุฏุฑ ฺฏูุชู ยซููยป",
                "โ ุชูุงู ุจู ุงุฌุชูุงุจ ุงุฒ ุชุนุงุฑุถ"
            ]
        },
        "ISTP": {
            "strengths": [
                "โ ุนููโฺฏุฑุง ู ูุณุชูู",
                "โ ุชุญููโฺฏุฑ ู ููุทู",
                "โ ุณุงุฒฺฏุงุฑ ู ุขุฑุงู",
                "โ ุชูุฑฺฉุฒ ุจุงูุง ุฏุฑ ุจุญุฑุงูโูุง",
                "โ ุญูโฺฉููุฏู ูุณุงุฆู"
            ],
            "weaknesses": [
                "โ ุจโุชูุงูุช ู ุณุฑุฏ",
                "โ ุจโุญูุตูฺฏ",
                "โ ููุงููุช ุฏุฑ ุจุฑุงุจุฑ ููุงูู",
                "โ ุงุฌุชูุงุจ ุงุฒ ุชุนูุฏุงุช ุจููุฏูุฏุช",
                "โ ุฏุดูุงุฑ ุฏุฑ ุจุงู ุงุญุณุงุณุงุช"
            ]
        },
        "ISFP": {
            "strengths": [
                "โ ููุฑููุฏ ู ุฎูุงู",
                "โ ููุฑุจุงู ู ุฏูุณูุฒ",
                "โ ุขุฑุงู ู ุตุจูุฑ",
                "โ ุฏูุณุชุฏุงุฑ ุทุจุนุช",
                "โ ุนููโฺฏุฑุง"
            ],
            "weaknesses": [
                "โ ฺฉูโุญุฑู ู ุฏุฑููโฺฏุฑุง",
                "โ ุงุฌุชูุงุจ ุงุฒ ุชุนุงุฑุถ",
                "โ ุญุณุงุณ ุจู ุงูุชูุงุฏ",
                "โ ุจโุซุจุงุช ุฏุฑ ุงูุฏุงู",
                "โ ุนุฏู ุชูุงู ุจู ุจุฑูุงููโุฑุฒ"
            ]
        },
        "ESTP": {
            "strengths": [
                "โ ูพุฑุงูุฑฺ ู ูพุฑุดูุฑ",
                "โ ูุงูุนโุจู ู ุนููโฺฏุฑุง",
                "โ ุณุฑุนโุงูุนูู ู ุชุตููโฺฏุฑ",
                "โ ุงุฌุชูุงุน ู ุจุฑููโฺฏุฑุง",
                "โ ุญูโฺฉููุฏู ูุณุงุฆู"
            ],
            "weaknesses": [
                "โ ุจโุซุจุงุช ุฏุฑ ุชุนูุฏุงุช",
                "โ ุจโุตุจุฑ ู ุนุฌูู ุจูุฏู",
                "โ ุชูุงู ุจู ุฎุทุฑูพุฐุฑ",
                "โ ุฏุดูุงุฑ ุฏุฑ ุจุฑูุงููโุฑุฒ ุจููุฏูุฏุช",
                "โ ุจโุชูุฌู ุจู ุฌุฒุฆุงุช"
            ]
        },
        "ESFP": {
            "strengths": [
                "โ ุงุฌุชูุงุน ู ุฎูุดโุจุฑุฎูุฑุฏ",
                "โ ูพุฑุงูุฑฺ ู ูุซุจุชโุงูุฏุด",
                "โ ุฎูุงู ู ููุฑููุฏ",
                "โ ููุฑุจุงู ู ุฏูุณูุฒ",
                "โ ุนููโฺฏุฑุง"
            ],
            "weaknesses": [
                "โ ฺฉูโุชูุฌู ุจู ุฌุฒุฆุงุช",
                "โ ูพุฑุงฺฉูุฏฺฏ ู ูุงูพุงุฏุงุฑ",
                "โ ุจโุตุจุฑ",
                "โ ุฏุดูุงุฑ ุฏุฑ ุจุฑูุงููโุฑุฒ ุจููุฏูุฏุช",
                "โ ุชูุงู ุจู ุงุฌุชูุงุจ ุงุฒ ุชุนุงุฑุถ"
            ]
        }
    }

    mbti_type = mbti_type.upper()
    if mbti_type not in traits:
        return "ููุงุท ููุช ู ุถุนู ุงู ุชูพ ูููุฒ ุซุจุช ูุดุฏูโุงูุฏ."

    strengths = traits[mbti_type]["strengths"]
    weaknesses = traits[mbti_type]["weaknesses"]

    text = "๐ช ููุงุท ููุช:\n" + "\n".join(f"- {s}" for s in strengths)
    text += "\n\nโ๏ธ ููุงุท ุถุนู:\n" + "\n".join(f"- {w}" for w in weaknesses)

    return text



class AdvancedMBTI(StatesGroup):
    q_index = State()
    answers = State()

class SlideResult(StatesGroup):
    slide = State()
    mbti_type = State()
    saved = State()




def question_advance_buttons():
    return InlineKeyboardMarkup(inline_keyboard=[
        [
            InlineKeyboardButton(text="โ ุจูู", callback_data="advanced_yes"),
            InlineKeyboardButton(text="โ ุฎุฑ", callback_data="advanced_no")
        ],
        [
            InlineKeyboardButton(text="โ ููโุฏููู", callback_data="advanced_idk")
        ],
        [
            InlineKeyboardButton(text="๐ ุจุงุฒฺฏุดุช", callback_data="advanced_back")
        ]
    ])

# --- ูุญุงุณุจู ุฏุฑุตุฏูุง ---
def calculate_percentages(answers: list, questions: list[dict]) -> dict:
    scores = {
        "EI": {"E": 0, "I": 0},
        "SN": {"S": 0, "N": 0},
        "TF": {"T": 0, "F": 0},
        "JP": {"J": 0, "P": 0}
    }

    for answer, question in zip(answers, questions):
        dim = question["dimension"]
        dir = question["direction"]

        opposite = {"E": "I", "I": "E", "S": "N", "N": "S", "T": "F", "F": "T", "J": "P", "P": "J"}

        if answer == 1:
            scores[dim][dir] += 1
        elif answer == 0:
            scores[dim][opposite[dir]] += 1
        elif answer == 0.5:
            scores[dim][dir] += 0.5
            scores[dim][opposite[dir]] += 0.5

    percentages = {}
    for dim, options in scores.items():
        keys = list(options.keys())
        total = options[keys[0]] + options[keys[1]] or 1
        for key in options:
            percentages[key] = int((options[key] / total) * 100)

    return percentages


def safe_percent(value):
    if value is None:
        return 0
    if value <= 1:
        return int(value * 100)
    return int(value)



class SlideResult(StatesGroup):
    slide = State()
    mbti_type = State()
    saved = State()

def question_advance_buttons():
    return InlineKeyboardMarkup(inline_keyboard=[
        [
            InlineKeyboardButton(text="โ ุจูู", callback_data="advanced_yes"),
            InlineKeyboardButton(text="โ ุฎุฑ", callback_data="advanced_no")
        ],
        [
            InlineKeyboardButton(text="โ ููโุฏููู", callback_data="advanced_idk")
        ],
        [
            InlineKeyboardButton(text="๐ ุจุงุฒฺฏุดุช", callback_data="advanced_back")
        ]
    ])


def format_advanced_result(result, name):
    print("๐ฌ Input to format_advanced_result:", result)
    percentages = result.get("percentages")
    if percentages is None:
        print("โ๏ธ Warning: percentages is None in result!")
        percentages = {}
    I = safe_percent(percentages.get("I"))
    E = safe_percent(percentages.get("E"))
    N = safe_percent(percentages.get("N"))
    S = safe_percent(percentages.get("S"))
    T = safe_percent(percentages.get("T"))
    F = safe_percent(percentages.get("F"))
    J = safe_percent(percentages.get("J"))
    P = safe_percent(percentages.get("P"))

    mbti_type = (
        ("I" if I > E else "E") +
        ("N" if N > S else "S") +
        ("T" if T > F else "F") +
        ("J" if J > P else "P")
    )

    slide_0 = (f"""
๐ ูุชุฌู ุชุณุช ูพุดุฑูุชู MBTI ุจุฑุง {name} ุฌุงู

๐งฌ ุชูพ ุดุฎุตุช ุชู: **{mbti_type}**

๐ ุชุญูู ุงุจุนุงุฏ ุดุฎุตุช:

๐ง ุงูุฑฺ:
I (ุฏุฑููโฺฏุฑุง) {I}% | E (ุจุฑููโฺฏุฑุง) {E}%

๐ ุงุทูุงุนุงุช:
N (ุดููุฏ) {N}% | S (ุญุณ) {S}%

โ๏ธ ุชุตููโฺฏุฑ:
T (ููุทู) {T}% | F (ุงุญุณุงุณ) {F}%

๐๏ธ ุณุจฺฉ ุฒูุฏฺฏ:
J (ุณุงุฎุชโฺฏุฑุง) {J}% | P (ููุนุทู) {P}%
""")
    return  slide_0, mbti_type



@router.callback_query(F.data == "mbti_advanced_start")
async def start_advanced_test(callback: CallbackQuery, state: FSMContext):
    await state.set_state(AdvancedMBTI.q_index)
    await state.update_data(q_index=0, answers=[])
    await send_advanced_question(callback, state)

@router.callback_query(F.data.in_(["advanced_yes", "advanced_no", "advanced_idk"]))
async def handle_advanced_answer(callback: CallbackQuery, state: FSMContext):
    data = await state.get_data()
    index = data.get("q_index", 0)
    answers = data.get("answers", [])

    mapping = {
        "advanced_yes": 1,
        "advanced_no": 0,
        "advanced_idk": 0.5
    }
    answers.append(mapping[callback.data])

    await state.update_data(q_index=index + 1, answers=answers)
    await send_advanced_question(callback, state)

    await callback.answer()

async def send_advanced_question(callback: CallbackQuery, state: FSMContext):
    data = await state.get_data()
    index = data.get("q_index", 0)

    if index < len(mbti_advanced_questions):
        question = mbti_advanced_questions[index]
        await callback.message.edit_text(
            question["text"],  # ููุท ูุชูุ ูู ฺฉู ุฏฺฉุดูุฑ
            reply_markup=question_advance_buttons()
        )

        await callback.answer()
    else:
        # ูพุงุงู ุชุณุช
        await callback.message.edit_text("โ ุชุณุช ูพุดุฑูุชู ุจู ูพุงุงู ุฑุณุฏ. ุฏุฑ ุญุงู ูพุฑุฏุงุฒุด ูุชุฌู ูุณุชู...")

        data = await state.get_data()
        result = calculate_percentages(data["answers"], mbti_advanced_questions)
        name = get_user_profile(callback.from_user.id)[0] or "ุฑูู"
        text ,mbti_type = format_advanced_result(result, name)

        # ุณุช ฺฉุฑุฏู ุงุณุชุช ุฌุฏุฏ ุจุฑุง ุญุงูุช ุงุณูุงุฏ
        await state.set_state(SlideResult.slide)
        await state.set_state(SlideResult.slide)
        await state.update_data(
            slide=0, mbti_type=mbti_type,
            saved=False, name=name,
            full_result_text=text  # ๐ ุงู ุฎุท ูููู
        )

        # ฺฏุฑูุชู ูุญุชูุง ุงุณูุงุฏ ุงูู
        content = get_slide_content(0, mbti_type, name, result)
        keyboard = get_slide_keyboard(0, False)

        await callback.message.edit_text(f"{content}\n\n(1/5)", reply_markup=keyboard)
        await callback.answer()


@router.callback_query(F.data == "advanced_back")
async def go_back_advanced_question(callback: CallbackQuery, state: FSMContext):
    data = await state.get_data()
    index = max(data.get("q_index", 0) - 1, 0)
    answers = data.get("answers", [])

    if answers:
        answers.pop()

    await state.update_data(q_index=index, answers=answers)
    await send_advanced_question(callback, state)
    await callback.answer()


# --- ุงุณูุงุฏูุง ---
async def get_slide_content(state: FSMContext, slide_num: int) -> str:
    data = await state.get_data()
    mbti_type = data.get("mbti_type", "INTP")
    name = data.get("name", "ุฑูู")

    if slide_num == 0:
        return data.get("full_result_text", "โ ูุชุฌูโุง ุจุฑุง ููุงุด ูุฌูุฏ ูุฏุงุฑุฏ.")
    elif slide_num == 1:
        return get_job_suggestions_text(mbti_type)
    elif slide_num == 2:
        return get_strengths_weaknesses_text(mbti_type)
    elif slide_num == 3:
        return get_growth_tips_text(mbti_type)
    else:
        return "ูพุงุงู ุชุญูู. ุจุฑุง ุดุฑูุน ุฏูุจุงุฑู /start ุฑุง ุจุฒูุฏ."

def get_slide_keyboard(current_slide: int, saved: bool):
    buttons = []
    if current_slide > 0:
        buttons.append(InlineKeyboardButton(text="โฌ๏ธ ูุจู", callback_data="prev_slide"))
    if current_slide < 4:
        buttons.append(InlineKeyboardButton(text="ุจุนุฏ โก๏ธ", callback_data="next_slide"))
    if not saved:
        buttons.append(InlineKeyboardButton(text="โ ุฐุฎุฑู ุชุณุช", callback_data="save_result"))

    return InlineKeyboardMarkup(inline_keyboard=[buttons])


def get_slide_content(slide_num: int, mbti_type: str, name: str, result: dict):
    print("๐ Result received in get_slide_content:", result)
    # ุจุฑ ุงุณุงุณ ุดูุงุฑู ุงุณูุงุฏุ ูุญุชูุง ููุงุณุจ ุฑู ุจุงุฒฺฏุฑุฏููู
    if slide_num == 0:
        text, _ = format_advanced_result(result, name)
        return text
    elif slide_num == 1:
        return get_job_suggestions_text(mbti_type)
    elif slide_num == 2:
        return get_strengths_weaknesses_text(mbti_type)
    elif slide_num == 3:
        return get_growth_tips_text(mbti_type)
    elif slide_num == 4:
        _,final_slide = format_advanced_result(result, name)
        return final_slide


def get_slide_keyboard(current_slide: int, saved: bool):
    buttons = []
    if current_slide > 0:
        buttons.append(InlineKeyboardButton(text="โฌ๏ธ ูุจู", callback_data="prev_slide"))
    if current_slide < 4:  # ุชุนุฏุงุฏ ุงุณูุงุฏูุง ุชุญูู (ูุซูุง 4)
        buttons.append(InlineKeyboardButton(text="ุจุนุฏ โก๏ธ", callback_data="next_slide"))
    if not saved:
        buttons.append(InlineKeyboardButton(text="โ ุฐุฎุฑู ุชุณุช", callback_data="save_result"))

    return InlineKeyboardMarkup(inline_keyboard=[buttons])









@router.callback_query(F.data.in_(["next_slide", "prev_slide", "save_result"]))
async def slide_navigation_handler(callback: CallbackQuery, state: FSMContext):
    data = await state.get_data()
    current_slide = data.get("slide", 0)
    mbti_type = data.get("mbti_type")
    saved = data.get("saved", False)
    name = data.get("name", "ุฑูู")
    result = data.get("result")

    if callback.data == "next_slide":
        current_slide = min(current_slide + 1, 4)
    elif callback.data == "prev_slide":
        current_slide = max(current_slide - 1, 0)
    elif callback.data == "save_result" and not saved:
        await save_user_result(callback.from_user.id, mbti_type)
        saved = True

    await state.update_data(slide=current_slide, saved=saved)

    content = get_slide_content(current_slide, mbti_type, name, result)
    keyboard = get_slide_keyboard(current_slide, saved)
    await callback.message.edit_text(f"{content}\n\n({current_slide + 1}/5)", reply_markup=keyboard)
    await callback.answer(text="ูุชุฌู ุฐุฎุฑู ุดุฏ." if callback.data == "save_result" else "ุงุณูุงุฏ ุชุบุฑ ฺฉุฑุฏ.")







# ุณูุงูุงุช ุชุณุช ุณุงุฏู MBTI
mbti_simple_questions = [
    """1๏ธโฃ ูู ุญุงู ูโฺฉูู ุจุดุชุฑ ููุชุงูู ุจุง ุจูู ุจฺฏุฐุฑูููุ ุจุง ุฌูุน ุฎูุด ูโฺฏุฐุฑูุ ุชููุง ุจูููู ุญูุตูู ุณุฑ ูโุฑู.  
โ ุจูู ุนู ุขุฑู ุฌูุนโุฏูุณุชุ  
โ ูู ุนู ุชููุง ุฑู ุจุดุชุฑ ุฏูุณุช ุฏุงุฑุ  
โ ููโุฏููู ุนู ุจุนุถ ููุชุง ุงูุทูุฑ ุจุนุถ ููุชุง ุงููุทูุฑ.""",

    """2๏ธโฃ ููุช ู ฺฉุงุฑ ุฑู ุดุฑูุน ูโฺฉููุ ุฏูุณุช ุฏุงุฑู ุชูููุด ฺฉูู ุญุช ุงฺฏู ุฎุณุชู ุจุดู ุง ุณุฎุช ุจุงุดู.  
โ ุจูู ุนู ูู ููโฺฉู ุชุง ุชูุด ุจุฑุ  
โ ูู ุนู ูุณุท ฺฉุงุฑ ููฺฉูู ุจุฎุงู ุดุ  
โ ููโุฏููู ุนู ุจุณุชฺฏ ุจู ุดุฑุงุท ุฏุงุฑู.""",

    """3๏ธโฃ ูู ุขุฏู ุฑุฒุจู ู ูฺฉุชูโุจููุ ฺุฒุง ุฑู ูโุจูู ฺฉู ุจูู ููโุจูู ุง ุชูุฌู ููโฺฉูู.  
โ ุจูู ุนู ุฎู ุฌุฒุฆุงุชุ  
โ ูู ุนู ุฏุฑุดุชโุจู ู ุญูุตูู ุฑุฒูโฺฉุงุฑ ูุฏุงุฑุ  
โ ููโุฏููู ุนู ฺฏุงู ูุณุช ฺฏุงู ูู.""",

    """4๏ธโฃ ุจุนุถ ููุชุง ู ุญุณ ุจูู ูโฺฏู ฺ ุฏุฑุณุชูุ ุจุฏูู ุงูฺฉู ุฏูู ุฏุงุดุชู ุจุงุดู.  
โ ุจูู ุนู ุจู ุญุณ ุดุดูุช ุงุนุชูุงุฏ ุฏุงุฑุ  
โ ูู ุนู ุจุฏูู ุฏูู ฺฉุงุฑ ููโฺฉูุ  
โ ููโุฏููู ุนู ฺฏุงู ุจู ุญุณ ุฎูุฏุช ฺฏูุด ูโุฏ ฺฏุงู ูู.""",

    """5๏ธโฃ ูู ุขุฏู ููุทูโุงูุ ูุฑ ฺฉุงุฑ ูโฺฉูู ุจุงุฏ ุจุฑุงุด ุฏูู ู ููุทู ุฏุงุดุชู ุจุงุดู.  
โ ุจูู ุนู ุฏูุจุงู ุฏูู ู ููุทูุ  
โ ูู ุนู ุจุนุถ ฺฉุงุฑุง ุฑู ุฏู ุงูุฌุงู ูโุฏุ  
โ ููโุฏููู ุนู ุจุณุชฺฏ ุจู ูููุนุช ุฏุงุฑู.""",

    """6๏ธโฃ ุงูู ุฏูู ูโุฎูุงุฏ ุญุงู ู ุงุญุณุงุณ ุทุฑูู ุจูููู ุจุนุฏ ูุถุงูุช ฺฉูู.  
โ ุจูู ุนู ุขุฏู ุฏูุณูุฒ ู ููุฏูุ  
โ ูู ุนู ูุณุชูู ูุถุงูุช ูโฺฉูุ  
โ ููโุฏููู ุนู ฺฏุงู ููุฏู ูโฺฉู ฺฏุงู ูู.""",

    """7๏ธโฃ ูุจู ูุฑ ฺฉุงุฑ ุฏูุณุช ุฏุงุฑู ุจุฏููู ูุฑุงุฑู ฺ ุจุดู ู ุจุฑูุงููโุฑุฒ ฺฉูู.  
โ ุจูู ุนู ุงูู ุจุฑูุงููโุงุ  
โ ูู ุนู ูโุฐุงุฑ ูุฑฺ ูพุด ุงููุฏ ูพุด ูุงุฏุ  
โ ููโุฏููู ุนู ุจุนุถ ููุชุง ุจุฑูุงูู ุฏุงุฑ ุจุนุถ ููุชุง ุจุฎุงู.""",

    """8๏ธโฃ ุจุนุถ ููุชุง ูุณุท ุดูุฎุชฺฏ ู ุจโูุธู ุจูุชุฑู ูฺฉุฑุง ูุงุฏ ุชู ุฐููู.  
โ ุจูู ุนู ุชู ุจโุจุฑูุงูฺฏ ุงุฏูโุฏุงุฑ ูโุดุ  
โ ูู ุนู ููุท ุจุง ูุธู ู ุจุฑูุงูู ุฎูุจ ฺฉุงุฑ ูโฺฉูุ  
โ ููโุฏููู ุนู ฺฏุงู ุงูุทูุฑ ฺฏุงู ุงููุทูุฑ.""",

    """9๏ธโฃ ุจูุฏู ุจู ฺฉู ุขุฏู ุจูู ุงูุฑฺ ูโุฏู ู ุดุงุฑฺ ูโุดู.  
โ ุจูู ุนู ุฌูุนโุฏูุณุชุ  
โ ูู ุนู ุชููุง ุฑู ุจุดุชุฑ ุฏูุณุช ุฏุงุฑุ  
โ ููโุฏููู ุนู ุจุณุชฺฏ ุจู ุญุงู ู ุฑูุฒุช ุฏุงุฑู.""",

    """๐ ุจุดุชุฑ ุฏูุณุช ุฏุงุฑู ฺฏูุด ุจุฏู ุชุง ุงูฺฉู ุฎูุฏู ุญุฑู ุจุฒูู.  
โ ุจูู ุนู ุดูููุฏูโุงุ  
โ ูู ุนู ุจุดุชุฑ ุฏูุณุช ุฏุงุฑ ุญุฑู ุจุฒูุ  
โ ููโุฏููู ุนู ุจุณุชฺฏ ุจู ุฌูุน ู ุญุงู ุฏุงุฑ.""",

    """1๏ธโฃ1๏ธโฃ ุฏูุณุช ุฏุงุฑู ฺุฒุง ฺฉู ูุงูุน ุจุงุดู ุฑู ุชุฌุฑุจู ฺฉููุ ุฑูุงูพุฑุฏุงุฒ ุฒุงุฏ ุญุงู ููโุฏู.  
โ ุจูู ุนู ุนููโฺฏุฑุง ู ูุงูุนโุจูุ  
โ ูู ุนู ุฑูุงูพุฑุฏุงุฒ ู ุฎุงูโุจุงูุ  
โ ููโุฏููู ุนู ุจุณุชฺฏ ุจู ูููุนุช ุฏุงุฑู.""",

    """2๏ธโฃ1๏ธโฃ ุจุนุถ ููุชุง ุจุฏูู ุงูฺฉู ููู ฺุฒู ุจุฏูููุ ููุท ฺูู ุญุณ ุฎูุจ ุฏุงุฑู ู ุชุตูู ูโฺฏุฑู.  
โ ุจูู ุนู ุฏู ู ุงุญุณุงุณ ุชุตูู ูโฺฏุฑุ  
โ ูู ุนู ุญุชูุงู ุจุงุฏ ููู ฺ ุฑู ุจุฏููุ  
โ ููโุฏููู ุนู ุจุณุชฺฏ ุฏุงุฑู.""",

    """3๏ธโฃ1๏ธโฃ ุชู ุจุญุซุง ุงูู ุงุฒ ููู ูโุฎูุงู ุจุจูู ููุทู ุญุฑู ุทุฑู ฺูุ ุญุงูุง ูุฑฺฉ ูโุฎูุงุฏ ุจุงุดู.  
โ ุจูู ุนู ุงูู ููุทู ู ุงุณุชุฏูุงูุ  
โ ูู ุนู ุจุดุชุฑ ุงุญุณุงุณ ุง ุดุฎุต ูโุจูุ  
โ ููโุฏููู ุนู ุจุณุชฺฏ ุจู ุจุญุซ ู ุทุฑู ุฏุงุฑู.""",

    """4๏ธโฃ1๏ธโฃ ุงฺฏู ฺฉ ูุงุฑุงุญุช ุจุงุดูุ ุญุช ุงฺฏู ุฎูุฏุด ููุตุฑ ุจูุฏูุ ุฏูู ูโุฎูุงุฏ ุขุฑููุด ฺฉูู.  
โ ุจูู ุนู ุฏูุณูุฒ ู ููุฑุจููุ  
โ ูู ุนู ูโฺฏ ุฎูุฏุด ููุตุฑู ููุด ฺฉูุ  
โ ููโุฏููู ุนู ฺฏุงู ุขุฑูู ูโฺฉู ฺฏุงู ูู.""",

    """5๏ธโฃ1๏ธโฃ ุงฺฏู ูู ุจฺฏู ุจุง ุจุฑู ุณูุฑ ู ูู ุฎุจุฑ ูุฏุงุดุชู ุจุงุดูุ ุงุณุชุฑุณ ูโฺฏุฑู.  
โ ุจูู ุนู ุงูู ุจุฑูุงููโุฑุฒโุงุ  
โ ูู ุนู ุขุฏู ูู ู ุจโุจุฑูุงููโุงุ  
โ ููโุฏููู ุนู ุจุณุชฺฏ ุจู ุญุงู ู ูฺฉุงู ุฏุงุฑู.""",

    """6๏ธโฃ1๏ธโฃ ุจุนุถ ููุชุง ุฏูู ูโุฎูุงุฏ ููู ฺ ุฑู ูู ฺฉูู ู ููุท ุจุฑู ุฏูุจุงู ุญุงู ุฎูุด ุงูู ูุญุธู.  
โ ุจูู ุนู ุขุฏู ูุญุธูโุง ู ุงูู ุญุงูุ  
โ ูู ุนู ุจุดุชุฑ ฺฉูุชุฑู ุฏุงุฑ ู ููุทูุ  
โ ููโุฏููู ุนู ฺฏุงู ุงูุทูุฑ ฺฏุงู ุงููุทูุฑ."""
]


# ูุถุนุชโูุง ุจุฑุง ุชุณุช ุณุงุฏู
class SimpleMBTI(StatesGroup):
    q_index = State()
    answers = State()

# ุฏฺฉูู ุดุฑูุน ุชุณุช ุณุงุฏู
@router.callback_query(F.data == "mbti_simple")
async def simple_test_intro(callback: CallbackQuery, state: FSMContext):
    profile = get_user_profile(callback.from_user.id)
    name = profile[0] if profile else "ุฑูู"

    keyboard = InlineKeyboardMarkup(inline_keyboard=[
        [InlineKeyboardButton(text="โ ุจุฒู ุจุฑู", callback_data="simple_start")],
        [InlineKeyboardButton(text="๐ ุจุงุฒฺฏุดุช", callback_data="main_menu")]
    ])

    await callback.message.edit_text(
        text=f""" ุณูุงู {name}๐ 
ูุฑุงุฑู ู ุชุณุช ุดุฎุตุช ุณุงุฏู ู ุจุงุญุงู ุจฺฏุฑู ฺฉู ุจูููู ูุฏู ุดุฎุตุชุช ฺู ๐  
ูุฑ ุณูุงู ุฑู ูโูพุฑุณูุ ุชู ูู ููุท ุจุฒู:
โ ยซุจููยป ุงฺฏู ุญุณ ูโฺฉู ุงู ุญุฑู ุฏุฑุณุชู ุฏุฑ ููุฑุฏุช  
โ ยซููยป ุงฺฏู ฺฉูุงู ุงูุทูุฑ ูุณุช  
โ ยซููโุฏูููยป ุงฺฏู ูุฑุฏุฏ ุง ุจุนุถ ููุชุง ุงูุฌูุฑ ูุณุช ุจุนุถ ููุชุง ูู  

ุญูุงุณุช ุจุงุดูุ ุฌูุงุจ ุฏุฑุณุช ู ุบูุท ูุฏุงุฑู! ููุท ูููู ฺุฒ ฺฉู ุจู ุฏูุช ูโุดูู ุฑู ุจุฒู โค๏ธ  
ุฎุจ ุจุฑู ฺฉู ุฏุงุดุชู ุจุงุดู! ๐""",
        reply_markup=keyboard
    )
    await callback.answer()

# ุดุฑูุน ุชุณุช ุณุงุฏู
@router.callback_query(F.data == "simple_start")
async def start_simple_test(callback: CallbackQuery, state: FSMContext):
    await state.set_state(SimpleMBTI.q_index)
    await state.update_data(q_index=0, answers=[])
    await send_question(callback, state)

simple_mbti_descriptions = {
    "INTJ": "ูุชูฺฉุฑ ุงุณุชุฑุงุชฺฺฉุ ุจุฑูุงููโุฑุฒ ุจููุฏูุฏุชุ ูุณุชูู ู ููุทู.",
    "INTP": "ุชุญููโฺฏุฑ ุฎูุงูุ ุนุงุดู ููุงูู ูพฺุฏู ู ุนููุ ูพุฑุณุดฺฏุฑ ู ููุขูุฑ.",
    "ENTJ": "ุฑูุจุฑ ุทุจุนุ ุชุตููโฺฏุฑ ูุงุทุนุ ูุฏูโููุฏ ู ูพุฑุงูุฑฺ.",
    "ENTP": "ูุงุฌุฑุงุฌู ูฺฉุฑุ ุงูู ุจุญุซุ ุฎูุงู ู ููุดู ุฏูุจุงู ฺุงูุด ุฌุฏุฏ.",
    "INFJ": "ุจูุดโููุฏ ู ุฏุฑููโฺฏุฑุงุ ุจุง ูุฏู ู ุนูุงููโููุฏ ุจู ฺฉูฺฉ ุจู ุฏฺฏุฑุงู.",
    "INFP": "ุขุฑูุงูโฺฏุฑุงุ ุฎูุงูุ ููุงุฏุงุฑ ุจู ุงุฑุฒุดโูุง ู ุนููุงู ุงุญุณุงุณ.",
    "ENFJ": "ุงููุงูโุจุฎุด ู ฺฉุงุฑุฒูุงุชฺฉุ ุญุงู ุฏฺฏุฑุงู ู ุนูุงููโููุฏ ุจู ููุงููฺฏ.",
    "ENFP": "ุณุฑุฒูุฏูุ ุฎูุงูุ ูุดุชุงู ุจุฑูุฑุงุฑ ุงุฑุชุจุงุท ู ุฏูุจุงู ูุนูุง ุฏุฑ ุฒูุฏฺฏ.",
    "ISTJ": "ูุงุจู ุงุนุชูุงุฏุ ูุณุฆููุชโูพุฐุฑุ ุนุงุดู ุณุงุฎุชุงุฑ ู ูุธู.",
    "ISFJ": "ููุฑุจุงู ู ููุงุฏุงุฑุ ุนูุงููโููุฏ ุจู ฺฉูฺฉ ุจู ุฏฺฏุฑุงู ุฏุฑ ุณฺฉูุช.",
    "ESTJ": "ูุฏุฑ ุนููโฺฏุฑุงุ ููุทู ู ุณุงุฒูุงูโุงูุชู ุจุง ููุงุฑุชโูุง ุงุฌุฑุง.",
    "ESFJ": "ุงุฌุชูุงุนุ ูุชุนูุฏุ ูุฑุงูุจ ุญุงู ุงุทุฑุงูุงู ู ูพุฑู ุณูุชโูุง.",
    "ISTP": "ุนููโฺฏุฑุงุ ุชุญููโฺฏุฑ ูุณุงุฆู ููุ ุณุงฺฉุช ู ูุณุชูู.",
    "ISFP": "ุณุงุฏูโุฒุณุชุ ููุฑุจุงูุ ููุฑุฏูุณุช ู ุนูุงููโููุฏ ุจู ููุงููฺฏ.",
    "ESTP": "ุณุฑุฒูุฏูุ ุฑุณฺฉโูพุฐุฑุ ุนุงุดู ุชุฌุฑุจูโูุง ุฌุฏุฏ ู ูุชุงุฌ ุณุฑุน.",
    "ESFP": "ุฎูุดโูุดุฑุจุ ุณุฑฺฏุฑูโฺฉููุฏูุ ุนุงุดู ุฌูุน ู ุชุฌุฑุจูโูุง ูุฐุชโุจุฎุด."
}

def question_buttons():
    return InlineKeyboardMarkup(inline_keyboard=[
        [InlineKeyboardButton(text="โ ุจูู", callback_data="simple_yes"),
         InlineKeyboardButton(text="โ ุฎุฑ", callback_data="simple_no")],
        [InlineKeyboardButton(text="โ ููโุฏููู", callback_data="simple_idk")],
        [InlineKeyboardButton(text="๐ ุจุงุฒฺฏุดุช", callback_data="simple_back")]
    ])

async def send_simple_mbti_result(callback: CallbackQuery, state: FSMContext, mbti_type: str):
    profile = get_user_profile(callback.from_user.id)
    name = profile[0] if profile else "ุฑูู"

    description = simple_mbti_descriptions.get(mbti_type, "ุดุฎุตุช ุฎุงุต ู ููุญุตุฑุจูโูุฑุฏ ุฏุงุฑ ฺฉู ุชุฑฺฉุจ ุงุฒ ูฺฺฏโูุง ูุชุนุงุฏูู.")

    caption = f"""๐งพ ูุชุฌู ุชุณุช ุณุงุฏู MBTI ุจุฑุง {name} ุฌุงู

๐ ุชูพ ุดุฎุตุช: {mbti_type}
{description}

---
๐ ุงู ููุท ุฎูุงุตูโุง ุงุฒ ุชูพ ุดุฎุตุช ุชู ุจูุฏ.
๐ฏ ุชุณุช ุณุงุฏู MBTI ุญุฏูุฏ 60% ุฏูุช ุฏุงุฑู ู ุจุฑุง ุดูุงุฎุช ุงููู ุฎูุจู ูู ุชุณุช ูพุดุฑูุชู ุจุงูุง 95% ุฏูุช ุชุดุฎุตุช ูุฏู 

๐ ุจุจู ุชู ูุณุฎู ูพุดุฑูุชู ูุฑุงุฑู ฺู ฺุฒุง ุจูุช ุจฺฏู:

โ ุชุญูู ฺฉุงูู ุดุฎุตุช
โ ุฏุฑุตุฏ ูฺฺฏโูุง ุฑูุงู ุชู
โ ุดุบูโูุง ฺฉู ุจุฑุง ุชู ุณุงุฎุชู ุดุฏู
โ ููุงุณู ุจุง ุงูุฑุงุฏ ูุนุฑูู
โ ุชูุตูโูุง ุฎุงุต ุจุฑุง ููููุช ุชู

๐ ูุณุฎู ูพุดุฑูุชู ุฑู ุจุฎุฑ ููุท ุจุง ณน,ฐฐฐ ุชููุงู!
"""
    test_type = "simple"
    keyboard = InlineKeyboardMarkup(inline_keyboard=[
        [InlineKeyboardButton(text="๐ ุจุงุฒ ฺฉุฑุฏู ุชุณุช ูพุดุฑูุชู", callback_data="mbti_advanced")],
        [InlineKeyboardButton(text="๐พ ุฐุฎุฑู ุชุณุช", callback_data=f"save_test:{test_type}:{mbti_type}")],
        [InlineKeyboardButton(text="๐ ุจุงุฒฺฏุดุช ุจู ููู ุงุตู", callback_data="back_to_main")]
    ])

    # ูุณุฑ ุชุตูุฑ
    image_path = f"img/{mbti_type}.png"

    # ุงุฑุณุงู ุนฺฉุณ
    if os.path.exists(image_path):
        photo = FSInputFile(image_path)
        await callback.message.answer_photo(photo=photo, caption=caption, reply_markup=keyboard)
    else:
        await callback.message.answer(f"{caption}\n(ุนฺฉุณ ุงูุช ูุดุฏ)", reply_markup=keyboard)

    await state.clear()
    await callback.answer()

# ๐ง ุงู ูููู ุชุงุจุนู ฺฉู ุณูุงูุงุช ุฑู ูุดูู ูุฏู ู ุฏุฑ ุงูุชูุง ูุชุฌู ุฑู
async def send_question(callback: CallbackQuery, state: FSMContext):
    data = await state.get_data()
    index = data.get("q_index", 0)
    answers = data.get("answers", [])
    user_id = callback.from_user.id

    if 0 <= index < len(mbti_simple_questions):
        question = mbti_simple_questions[index]
        await callback.message.edit_text(question, reply_markup=question_buttons())
        await callback.answer()
    else:
        profile = get_user_profile(user_id)
        name = profile[0] if profile else "ุฑูู"

        # ูุญุงุณุจู ุชูพ ุณุงุฏู ุงุฒ ุฌูุงุจโูุง:
        def majority(idx): return sum(answers[i] for i in idx) >= len(idx) / 2

        E = majority([0, 8, 9])
        S = majority([2, 3, 10, 11])
        T = majority([4, 5, 12, 13])
        J = majority([1, 6, 7, 14, 15])

        mbti_type = (
            ("E" if E else "I") +
            ("S" if S else "N") +
            ("T" if T else "F") +
            ("J" if J else "P")
        )

        text, keyboard = await send_simple_mbti_result(callback, state, mbti_type)
        await callback.message.edit_text(text, reply_markup=keyboard)
        await state.clear()
        await callback.answer()

# ููุฏู ูพุงุณุฎโูุง
@router.callback_query(
    F.data.in_(["simple_yes", "simple_no", "simple_idk"]))
async def handle_answer(callback: CallbackQuery, state: FSMContext):
    data = await state.get_data()
    index = data.get("q_index", 0)
    answers = data.get("answers", [])

    if callback.data == "simple_yes":
        answer = 1
    elif callback.data == "simple_no":
        answer = 0
    else:
        answer = 0.5
    answers.append(answer)

    await state.update_data(q_index=index + 1, answers=answers)
    await send_question(callback, state)

# ุจุงุฒฺฏุดุช ุจู ุณูุงู ูุจู
@router.callback_query(F.data == "simple_back")
async def go_back_question(callback: CallbackQuery, state: FSMContext):
    data = await state.get_data()
    index = max(data.get("q_index", 0) - 1, 0)
    answers = data.get("answers", [])

    if answers:
        answers.pop()

    await state.update_data(q_index=index, answers=answers)
    await send_question(callback, state)






async def send_mbti_result_image(user_id: int, mbti_type: str, description: str, bot: Bot):
    image_path = f"img/{mbti_type}.jpg"
    photo = FSInputFile(image_path)
    caption = f"๐ ุชูพ ุดุฎุตุช ุดูุง: {mbti_type}\n\n{description}"

    await bot.send_photo(
        chat_id=user_id,
        photo=photo,
        caption=caption
    )

@router.callback_query(lambda c: c.data.startswith("save_test:"))
async def handle_save_test(callback: types.CallbackQuery):
    user_id = callback.from_user.id
    _, test_type, mbti_type = callback.data.split(":")

    save_latest_test(user_id, mbti_type, test_type)

    tehran_time = datetime.now(pytz.timezone('Asia/Tehran')).strftime("%Y-%m-%d %H:%M")
    await callback.message.answer(f"โ ุชุณุช ุดูุง ({test_type}) ุจุง ูุชุฌู {mbti_type} ุฏุฑ ุชุงุฑุฎ {tehran_time} ุฐุฎุฑู ุดุฏ.")
    await callback.answer()
